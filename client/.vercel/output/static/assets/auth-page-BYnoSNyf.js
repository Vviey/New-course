import{j as e,k as L,l as B,u as M,a as G}from"./index-Cb9N_GOt.js";import{r as i}from"./react-Q3K9tvtn.js";import{G as U,T as we,a as I,b as k}from"./theme-DcT49bVe.js";import{P as T,c as y,u as V,a as Ne,b as Te}from"./index-46zefMcL.js";import{c as Ce,u as q}from"./index-CM1ufmSd.js";import{u as Ie}from"./index-CrZBFJ1p.js";import{u as J,P as Se}from"./index-DWd_5Rhy.js";import{u as z,t as H,z as w}from"./zod-F3vBKpH-.js";function Fe(s,t=[]){let o=[];function r(d,a){const c=i.createContext(a),m=o.length;o=[...o,a];function n(x){const{scope:f,children:h,...u}=x,b=(f==null?void 0:f[s][m])||c,C=i.useMemo(()=>u,Object.values(u));return e.jsx(b.Provider,{value:C,children:h})}function p(x,f){const h=(f==null?void 0:f[s][m])||c,u=i.useContext(h);if(u)return u;if(a!==void 0)return a;throw new Error(`\`${x}\` must be used within \`${d}\``)}return n.displayName=d+"Provider",[n,p]}const l=()=>{const d=o.map(a=>i.createContext(a));return function(c){const m=(c==null?void 0:c[s])||d;return i.useMemo(()=>({[`__scope${s}`]:{...c,[s]:m}}),[c,m])}};return l.scopeName=s,[r,Pe(l,...t)]}function Pe(...s){const t=s[0];if(s.length===1)return t;const o=()=>{const r=s.map(l=>({useScope:l(),scopeName:l.scopeName}));return function(d){const a=r.reduce((c,{useScope:m,scopeName:n})=>{const x=m(d)[`__scope${n}`];return{...c,...x}},{});return i.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return o.scopeName=t.scopeName,o}var E="rovingFocusGroup.onEntryFocus",Re={bubbles:!1,cancelable:!0},S="RovingFocusGroup",[A,W,Ee]=Ce(S),[ke,Q]=Fe(S,[Ee]),[Ae,_e]=ke(S),X=i.forwardRef((s,t)=>e.jsx(A.Provider,{scope:s.__scopeRovingFocusGroup,children:e.jsx(A.Slot,{scope:s.__scopeRovingFocusGroup,children:e.jsx(De,{...s,ref:t})})}));X.displayName=S;var De=i.forwardRef((s,t)=>{const{__scopeRovingFocusGroup:o,orientation:r,loop:l=!1,dir:d,currentTabStopId:a,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:m,onEntryFocus:n,preventScrollOnEntryFocus:p=!1,...x}=s,f=i.useRef(null),h=Ie(t,f),u=q(d),[b=null,C]=V({prop:a,defaultProp:c,onChange:m}),[v,j]=i.useState(!1),F=Ne(n),he=W(o),P=i.useRef(!1),[ge,K]=i.useState(0);return i.useEffect(()=>{const g=f.current;if(g)return g.addEventListener(E,F),()=>g.removeEventListener(E,F)},[F]),e.jsx(Ae,{scope:o,orientation:r,dir:u,loop:l,currentTabStopId:b,onItemFocus:i.useCallback(g=>C(g),[C]),onItemShiftTab:i.useCallback(()=>j(!0),[]),onFocusableItemAdd:i.useCallback(()=>K(g=>g+1),[]),onFocusableItemRemove:i.useCallback(()=>K(g=>g-1),[]),children:e.jsx(T.div,{tabIndex:v||ge===0?-1:0,"data-orientation":r,...x,ref:h,style:{outline:"none",...s.style},onMouseDown:y(s.onMouseDown,()=>{P.current=!0}),onFocus:y(s.onFocus,g=>{const be=!P.current;if(g.target===g.currentTarget&&be&&!v){const $=new CustomEvent(E,Re);if(g.currentTarget.dispatchEvent($),!$.defaultPrevented){const R=he().filter(N=>N.focusable),ve=R.find(N=>N.active),je=R.find(N=>N.id===b),ye=[ve,je,...R].filter(Boolean).map(N=>N.ref.current);se(ye,p)}}P.current=!1}),onBlur:y(s.onBlur,()=>j(!1))})})}),Z="RovingFocusGroupItem",ee=i.forwardRef((s,t)=>{const{__scopeRovingFocusGroup:o,focusable:r=!0,active:l=!1,tabStopId:d,...a}=s,c=J(),m=d||c,n=_e(Z,o),p=n.currentTabStopId===m,x=W(o),{onFocusableItemAdd:f,onFocusableItemRemove:h}=n;return i.useEffect(()=>{if(r)return f(),()=>h()},[r,f,h]),e.jsx(A.ItemSlot,{scope:o,id:m,focusable:r,active:l,children:e.jsx(T.span,{tabIndex:p?0:-1,"data-orientation":n.orientation,...a,ref:t,onMouseDown:y(s.onMouseDown,u=>{r?n.onItemFocus(m):u.preventDefault()}),onFocus:y(s.onFocus,()=>n.onItemFocus(m)),onKeyDown:y(s.onKeyDown,u=>{if(u.key==="Tab"&&u.shiftKey){n.onItemShiftTab();return}if(u.target!==u.currentTarget)return;const b=Me(u,n.orientation,n.dir);if(b!==void 0){if(u.metaKey||u.ctrlKey||u.altKey||u.shiftKey)return;u.preventDefault();let v=x().filter(j=>j.focusable).map(j=>j.ref.current);if(b==="last")v.reverse();else if(b==="prev"||b==="next"){b==="prev"&&v.reverse();const j=v.indexOf(u.currentTarget);v=n.loop?Ge(v,j+1):v.slice(j+1)}setTimeout(()=>se(v))}})})})});ee.displayName=Z;var Le={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Be(s,t){return t!=="rtl"?s:s==="ArrowLeft"?"ArrowRight":s==="ArrowRight"?"ArrowLeft":s}function Me(s,t,o){const r=Be(s.key,o);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Le[r]}function se(s,t=!1){const o=document.activeElement;for(const r of s)if(r===o||(r.focus({preventScroll:t}),document.activeElement!==o))return}function Ge(s,t){return s.map((o,r)=>s[(t+r)%s.length])}var Ue=X,Oe=ee,O="Tabs",[Ye,ns]=Te(O,[Q]),te=Q(),[Ke,Y]=Ye(O),re=i.forwardRef((s,t)=>{const{__scopeTabs:o,value:r,onValueChange:l,defaultValue:d,orientation:a="horizontal",dir:c,activationMode:m="automatic",...n}=s,p=q(c),[x,f]=V({prop:r,onChange:l,defaultProp:d});return e.jsx(Ke,{scope:o,baseId:J(),value:x,onValueChange:f,orientation:a,dir:p,activationMode:m,children:e.jsx(T.div,{dir:p,"data-orientation":a,...n,ref:t})})});re.displayName=O;var oe="TabsList",ae=i.forwardRef((s,t)=>{const{__scopeTabs:o,loop:r=!0,...l}=s,d=Y(oe,o),a=te(o);return e.jsx(Ue,{asChild:!0,...a,orientation:d.orientation,dir:d.dir,loop:r,children:e.jsx(T.div,{role:"tablist","aria-orientation":d.orientation,...l,ref:t})})});ae.displayName=oe;var ne="TabsTrigger",ie=i.forwardRef((s,t)=>{const{__scopeTabs:o,value:r,disabled:l=!1,...d}=s,a=Y(ne,o),c=te(o),m=de(a.baseId,r),n=ue(a.baseId,r),p=r===a.value;return e.jsx(Oe,{asChild:!0,...c,focusable:!l,active:p,children:e.jsx(T.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":n,"data-state":p?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:m,...d,ref:t,onMouseDown:y(s.onMouseDown,x=>{!l&&x.button===0&&x.ctrlKey===!1?a.onValueChange(r):x.preventDefault()}),onKeyDown:y(s.onKeyDown,x=>{[" ","Enter"].includes(x.key)&&a.onValueChange(r)}),onFocus:y(s.onFocus,()=>{const x=a.activationMode!=="manual";!p&&!l&&x&&a.onValueChange(r)})})})});ie.displayName=ne;var ce="TabsContent",le=i.forwardRef((s,t)=>{const{__scopeTabs:o,value:r,forceMount:l,children:d,...a}=s,c=Y(ce,o),m=de(c.baseId,r),n=ue(c.baseId,r),p=r===c.value,x=i.useRef(p);return i.useEffect(()=>{const f=requestAnimationFrame(()=>x.current=!1);return()=>cancelAnimationFrame(f)},[]),e.jsx(Se,{present:l||p,children:({present:f})=>e.jsx(T.div,{"data-state":p?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":m,hidden:!f,id:n,tabIndex:0,...a,ref:t,style:{...s.style,animationDuration:x.current?"0s":void 0},children:f&&d})})});le.displayName=ce;function de(s,t){return`${s}-trigger-${t}`}function ue(s,t){return`${s}-content-${t}`}var $e=re,me=ae,xe=ie,fe=le;const Ve=$e,pe=i.forwardRef(({className:s,...t},o)=>e.jsx(me,{ref:o,className:L("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...t}));pe.displayName=me.displayName;const _=i.forwardRef(({className:s,...t},o)=>e.jsx(xe,{ref:o,className:L("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...t}));_.displayName=xe.displayName;const D=i.forwardRef(({className:s,...t},o)=>e.jsx(fe,{ref:o,className:L("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t}));D.displayName=fe.displayName;function qe({userId:s,onClose:t}){const[o,r]=i.useState(!1),{toast:l}=B(),d=()=>{navigator.clipboard.writeText(s).then(()=>{r(!0),l({title:"User ID copied!",description:"Your user ID has been saved to clipboard"}),setTimeout(()=>r(!1),2e3)}).catch(a=>{console.error("Failed to copy: ",a),l({title:"Copy failed",description:"Please try copying manually",variant:"destructive"})})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-amber-100/60 p-4 rounded-lg",children:[e.jsx("p",{className:"text-amber-900 mb-3 font-medium",children:"This is your User ID"}),e.jsx("p",{className:"text-sm text-amber-800 mb-4",children:"Please save this ID in a safe place. You will need it to recover your account if you forget your password."}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-1 bg-white p-2 rounded border border-amber-200 font-mono text-sm overflow-x-auto",children:s}),e.jsx("button",{onClick:d,className:"ml-2 p-2 bg-amber-600 text-white rounded hover:bg-amber-700 transition-colors flex-shrink-0",children:o?e.jsx("span",{children:"✓"}):e.jsx("span",{children:"Copy"})})]})]}),e.jsxs("div",{className:"bg-blue-100/60 p-4 rounded-lg",children:[e.jsx("p",{className:"text-blue-900 mb-2 font-medium",children:"Why is this important?"}),e.jsx("p",{className:"text-sm text-blue-800",children:"This platform doesn't require your personal information (no KYC). Your User ID is your unique identifier that helps us recognize you and restore your progress."})]}),e.jsx("div",{className:"pt-4",children:e.jsx(U,{onClick:t,children:"Continue to Adventure"})})]})}const Je=w.object({username:w.string().min(1,"Username is required"),password:w.string().min(1,"Password is required")}),ze=w.object({username:w.string().min(3,"Username must be at least 3 characters"),email:w.string().email("Please enter a valid email").optional(),password:w.string().min(6,"Password must be at least 6 characters"),confirmPassword:w.string()}).refine(s=>s.password===s.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function He(){const[,s]=M(),{toast:t}=B(),[o,r]=i.useState(!1),{login:l}=G(),{register:d,handleSubmit:a,formState:{errors:c}}=z({resolver:H(Je),defaultValues:{username:"",password:""}}),m=async n=>{r(!0);try{l(n.username,n.password),s("/home"),t({title:"Welcome back!",description:"You've successfully logged in"})}catch(p){console.error("Login failed",p),t({title:"Login failed",description:"Please check your username and password",variant:"destructive"})}finally{r(!1)}};return e.jsxs(k,{className:"max-w-md w-full mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"flex justify-center space-x-4 mb-4",children:[e.jsx("img",{src:"/assets/characters/asha.svg",alt:"Asha",className:"h-24 object-contain"}),e.jsx("img",{src:"/assets/characters/odu.svg",alt:"Odu",className:"h-24 object-contain"})]}),e.jsx(I,{className:"mb-2",children:"Continue Your Journey"}),e.jsx("p",{className:"text-lightText/80",children:"Return to Asha's world of discovery"})]}),e.jsxs("form",{onSubmit:a(m),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium mb-2",children:"Your Username"}),e.jsx("input",{type:"text",id:"username",...d("username"),className:"w-full bg-darkBg border border-secondary/40 rounded-md p-3 text-lightText focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary",placeholder:"Enter your username"}),c.username&&e.jsx("p",{className:"mt-1 text-xs text-red-400",children:c.username.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium mb-2",children:"Password"}),e.jsx("input",{type:"password",id:"password",...d("password"),className:"w-full bg-darkBg border border-secondary/40 rounded-md p-3 text-lightText focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary",placeholder:"Your journey password"}),c.password&&e.jsx("p",{className:"mt-1 text-xs text-red-400",children:c.password.message})]}),e.jsx("div",{className:"pt-2",children:e.jsx(U,{type:"submit",disabled:o,children:"Return to the Realms"})}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("button",{type:"button",onClick:()=>s("/forgot-password"),className:"text-secondary/80 hover:text-primary text-xs underline",children:"Forgot your password?"})})]})]})}function We(){const[,s]=M(),{toast:t}=B(),[o,r]=i.useState(!1),[l,d]=i.useState(null),{register:a}=G(),{register:c,handleSubmit:m,formState:{errors:n}}=z({resolver:H(ze),defaultValues:{username:"",email:"",password:"",confirmPassword:""}}),p=async f=>{r(!0);try{a(f.username,f.password,f.email);const h=localStorage.getItem("ashaJourneyUserData");if(h)try{const u=JSON.parse(h);d(u.userId),t({title:"Account created!",description:"Your Bitcoin Quest journey begins"})}catch(u){console.error("Error parsing stored user data:",u),r(!1),t({title:"Something went wrong",description:"Could not retrieve your user ID",variant:"destructive"})}else r(!1),t({title:"Something went wrong",description:"Could not retrieve your user ID",variant:"destructive"})}catch(h){console.error("Error during registration:",h),r(!1),t({title:"Registration failed",description:"Please try again with a different username",variant:"destructive"})}},x=()=>{s("/home")};return e.jsx(e.Fragment,{children:l?e.jsxs(k,{className:"max-w-md w-full mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-20 h-20 mx-auto bg-primary/20 rounded-full flex items-center justify-center mb-4",children:e.jsx("span",{className:"text-3xl text-primary",children:"✓"})}),e.jsx(I,{className:"mb-2",children:"Journey Begins!"}),e.jsx("p",{className:"text-lightText/80 mb-6",children:"Your account has been created successfully"})]}),e.jsx(qe,{userId:l||"",onClose:x})]}):e.jsxs(k,{className:"max-w-md w-full mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"flex justify-center space-x-4 mb-4",children:[e.jsx("img",{src:"/assets/characters/asha.svg",alt:"Asha",className:"h-24 object-contain"}),e.jsx("img",{src:"/assets/characters/odu.svg",alt:"Odu",className:"h-24 object-contain"})]}),e.jsx(I,{className:"mb-2",children:"Begin Your Journey"}),e.jsx("p",{className:"text-lightText/80",children:"Create an account to track your progress"})]}),e.jsxs("form",{onSubmit:m(p),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium mb-2",children:"Username"}),e.jsx("input",{type:"text",id:"username",...c("username"),className:"w-full bg-darkBg border border-secondary/40 rounded-md p-3 text-lightText focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary",placeholder:"Choose a username"}),n.username&&e.jsx("p",{className:"mt-1 text-xs text-red-400",children:n.username.message})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium mb-2",children:["Email ",e.jsx("span",{className:"text-xs text-lightText/60",children:"(Optional)"})]}),e.jsx("input",{type:"email",id:"email",...c("email"),className:"w-full bg-darkBg border border-secondary/40 rounded-md p-3 text-lightText focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary",placeholder:"Your email address"}),e.jsx("p",{className:"mt-1 text-xs text-lightText/60",children:"For password recovery (recommended)"}),n.email&&e.jsx("p",{className:"mt-1 text-xs text-red-400",children:n.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium mb-2",children:"Password"}),e.jsx("input",{type:"password",id:"password",...c("password"),className:"w-full bg-darkBg border border-secondary/40 rounded-md p-3 text-lightText focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary",placeholder:"Create a secure password"}),n.password&&e.jsx("p",{className:"mt-1 text-xs text-red-400",children:n.password.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium mb-2",children:"Confirm Password"}),e.jsx("input",{type:"password",id:"confirmPassword",...c("confirmPassword"),className:"w-full bg-darkBg border border-secondary/40 rounded-md p-3 text-lightText focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary",placeholder:"Confirm your password"}),n.confirmPassword&&e.jsx("p",{className:"mt-1 text-xs text-red-400",children:n.confirmPassword.message})]}),e.jsx("div",{className:"pt-2",children:e.jsx(U,{type:"submit",disabled:o,children:"Start Your Journey"})})]})]})})}function is(){const[,s]=M(),{user:t}=G(),[o,r]=i.useState("login");return i.useEffect(()=>{t&&s("/home")},[t,s]),e.jsx(we,{children:e.jsxs("div",{className:"min-h-screen flex flex-col p-4 sm:p-6",children:[e.jsx("header",{className:"w-full max-w-6xl mx-auto mb-4",children:e.jsxs("button",{onClick:()=>s("/"),className:"flex items-center text-secondary hover:text-primary",children:[e.jsx("span",{className:"mr-1",children:"←"})," Back to Story"]})}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"w-full max-w-6xl grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsx("div",{className:"w-full",children:e.jsxs(Ve,{defaultValue:"login",value:o,onValueChange:r,className:"w-full",children:[e.jsxs(pe,{className:"grid grid-cols-2 mb-6",children:[e.jsx(_,{value:"login",children:"Log In"}),e.jsx(_,{value:"signup",children:"Sign Up"})]}),e.jsx(D,{value:"login",children:e.jsx(He,{})}),e.jsx(D,{value:"signup",children:e.jsx(We,{})})]})}),e.jsx("div",{className:"hidden md:flex flex-col justify-center items-center",children:e.jsxs("div",{className:"bg-darkBg/40 p-8 rounded-2xl border border-primary/20 backdrop-blur-sm",children:[e.jsx("div",{className:"flex justify-center mb-8",children:e.jsx("img",{src:"/assets/characters/asha.svg",alt:"Asha",className:"h-64 object-contain"})}),e.jsx(I,{className:"mb-4 text-center",children:"Explore the World of Bitcoin with Asha"}),e.jsx("p",{className:"text-lightText/80 text-center mb-6",children:"Embark on an educational journey through the realms of Bitcoin and discover the revolutionary potential of this technology in Africa and beyond."}),e.jsxs("ul",{className:"space-y-3 mb-8",children:[e.jsxs("li",{className:"flex items-center text-lightText/90",children:[e.jsx("span",{className:"text-primary mr-2",children:"✓"})," Interactive learning through stories"]}),e.jsxs("li",{className:"flex items-center text-lightText/90",children:[e.jsx("span",{className:"text-primary mr-2",children:"✓"})," Earn badges and track your progress"]}),e.jsxs("li",{className:"flex items-center text-lightText/90",children:[e.jsx("span",{className:"text-primary mr-2",children:"✓"})," Explore 7 unique realms of Bitcoin knowledge"]}),e.jsxs("li",{className:"flex items-center text-lightText/90",children:[e.jsx("span",{className:"text-primary mr-2",children:"✓"})," Learn at your own pace, on any device"]})]})]})})]})})]})})}export{is as default};
