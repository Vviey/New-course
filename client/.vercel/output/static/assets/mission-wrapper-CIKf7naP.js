import{u as b,j as a,b as M,n as w}from"./index-Cb9N_GOt.js";import{r as x}from"./react-Q3K9tvtn.js";import{g as y}from"./realm-utils-9A8akPZN.js";import"./realm1-missions-Cl9-J3R6.js";import"./realm2-missions-Npvvnli7.js";import"./realm3-missions--hao_c43.js";function j({children:i,realmId:s,missionId:t,totalMissions:u=1,title:n="Mission",subtitle:g="",progress:l=0}){b();const[r,d]=x.useState(l);return x.useEffect(()=>{const c=()=>{const f=window.scrollY,N=window.innerHeight,o=document.documentElement.scrollHeight,p=Math.min(100,Math.max(0,Math.round(f/(o-N)*100)));(l===0||p>r)&&d(p)};return window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)},[l,r]),a.jsx("div",{className:"min-h-screen flex flex-col",children:a.jsx("main",{className:"flex-1 container mx-auto px-4 py-6",children:a.jsx("div",{className:"w-full",children:i})})})}const E=()=>a.jsxs("div",{className:"flex items-center justify-center min-h-[80vh]",children:[a.jsx(w,{className:"h-8 w-8 animate-spin text-primary"}),a.jsx("span",{className:"ml-2 text-foreground",children:"Loading mission..."})]}),L=({realmId:i,missionId:s})=>{const[,t]=b(),u=parseInt(i),n=!isNaN(u)&&u>=1&&u<=7,g=n?y(u):"the Map",l=n?`/realm/${i}`:"/map";let r="";return!i||isNaN(Number(i))?r="Invalid realm specified. Please return to the map and select a valid realm.":!s||isNaN(Number(s))?r="Invalid mission specified. Please return to the realm and select a valid mission.":r=`We couldn't find mission ${s} in ${g}. It may have been moved or doesn't exist.`,a.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[80vh] p-4",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4 text-destructive",children:"Mission not found"}),a.jsx("p",{className:"mb-6 text-center max-w-md text-muted-foreground",children:r}),a.jsxs("button",{onClick:()=>t(l),className:"px-4 py-2 bg-primary hover:bg-primary/90 rounded-md text-primary-foreground transition-colors",children:["Return to ",g]})]})};function k(i,s,t){return Object.prototype.hasOwnProperty.call(i,"useCustomLayout")||s==="1"&&t==="1"}function O(){const i=M();b();const s=i.realmId,t=i.missionId,[u,n]=x.useState(!0),[g,l]=x.useState(!1),[r,d]=x.useState(null),[c,f]=x.useState(null),N=(o,p)=>{let m=Number(o);const e=Number(p);return e>=1&&e<=2&&(m=e*100+Number(o)),{title:`Mission ${o}`,subtitle:`A learning journey in ${y(Number(p))}`,fullMissionId:m}};return x.useEffect(()=>{n(!0),l(!1),f(null),d(null);let o=!0;if(!s||isNaN(Number(s))||!t||isNaN(Number(t))){console.error("Invalid realm or mission ID:",{realmId:s,missionId:t}),l(!0),n(!1);return}return(async()=>{try{let m;const e=Number(s),v=Number(t);if(e<1||e>7)throw new Error(`Realm ${e} is out of valid range (1â€“7)`);let $=[];e===4?$=[`../pages/realm${e}/mission.tsx`,`../pages/realm${e}/missions.tsx`,`../pages/realm${e}/mining-simulator.tsx`,`../pages/realm${e}/consensus-simulator.tsx`,`../pages/realm${e}/energy-simulator.tsx`,`../pages/realm${e}/africa-simulator.tsx`,`../pages/realm${e}/knowledge-simulator.tsx`,`../pages/realm${e}/halving-simulator.tsx`]:$=[`../pages/realm${e}/mission${v}.tsx`,`../pages/realm${e}/mission.tsx`,`../pages/realm${e}/missions.tsx`,`../pages/realm${e}/barter-web-challenge.tsx`,`../pages/realm${e}/currency-value-simulator.tsx`,`../pages/realm${e}/inflation-simulator.tsx`,`../pages/realm${e}/halving-simulator.tsx`,`../pages/realm${e}/energy-simulator.tsx`,`../pages/realm${e}/africa-simulator.tsx`,`../pages/realm${e}/knowledge-simulator.tsx`,`../pages/realm${e}/consensus-simulator.tsx`,`../pages/realm${e}/mining-simulator.tsx`,`../pages/realm${e}/cryptography-simulator.tsx`,`../pages/realm${e}/hashing-simulator.tsx`,`../pages/realm${e}/merkle-tree-simulator.tsx`,`../pages/realm${e}/lightning-simulator.tsx`,`../pages/realm${e}/lightning-bitcoin-simulator.tsx`,`../pages/realm${e}/trustless-simulator.tsx`,`../pages/realm${e}/forks-simulator.tsx`,`../pages/realm${e}/keys-simulator.tsx`,`../pages/realm${e}/mempool-simulator.tsx`,`../pages/realm${e}/node-simulator.tsx`,`../pages/realm${e}/scaling-simulator.tsx`,`../pages/realm${e}/transaction-simulator.tsx`,`../pages/realm${e}/wallet-simulator.tsx`,`../pages/realm${e}/bip-simulator.tsx`,`../pages/realm${e}/failed-forks-simulator.tsx`,`../pages/realm${e}/governance-simulator.tsx`,`../pages/realm${e}/historical-forks-simulator.tsx`],$.push(`../realms/Realm${e}/Mission${v}/index.tsx`);for(const h of $)try{m=await import(h);break}catch{continue}if(!m)throw new Error(`Mission ${t} in Realm ${s} not found.`);if(o){f(()=>m.default);const h=N(t,s);d({title:h.title,subtitle:h.subtitle}),n(!1)}}catch(m){console.error("Failed to load mission:",m),o&&(l(!0),n(!1))}})(),()=>{o=!1}},[s,t]),u?a.jsx(E,{}):g||!c?a.jsx(L,{realmId:s,missionId:t}):k(c,t,s)?a.jsx(c,{}):a.jsx(j,{realmId:s,title:(r==null?void 0:r.title)||`Mission ${t}`,subtitle:r==null?void 0:r.subtitle,children:a.jsx(c,{})})}export{O as default};
