import{j as e,p as r}from"./index-Cb9N_GOt.js";import{r as d}from"./react-Q3K9tvtn.js";import{R as j}from"./refresh-cw-C2iCUXhH.js";import{S as z}from"./shuffle-M_UsneGW.js";import{K as T}from"./key-o30NT835.js";import{H as J}from"./hash-XwdJaU6w.js";import{M as O}from"./map-pin-CI4ygCzi.js";function ce({onComplete:E}){const[c,h]=d.useState(1),[p,N]=d.useState(""),[Q,k]=d.useState(""),[b,C]=d.useState(""),[Z,S]=d.useState(""),[g,B]=d.useState(""),[A,K]=d.useState(""),[x,U]=d.useState(""),[H,R]=d.useState(!1),[y,P]=d.useState({completed:!1,message:"",success:!1}),[n,m]=d.useState(!1),$="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",u=t=>Array.from(t,s=>s.toString(16).padStart(2,"0")).join(""),v=(t,s=8)=>{var o;return((o=t.match(new RegExp(".{1,"+s+"}","g")))==null?void 0:o.join(" "))||t};class I{constructor(s){this.seed=s}next(){return this.seed=(this.seed*9301+49297)%233280,this.seed/233280}}const F=t=>{const s=Array.from(t).reduce((i,w,f)=>i+w*(f+1),0),o=new I(s),a=new Uint8Array(65);a[0]=4;for(let i=1;i<65;i++)a[i]=Math.floor(o.next()*256);const l=new Uint8Array(33);return l[0]=o.next()>.5?2:3,l.set(a.slice(1,33),1),{uncompressed:a,compressed:l}},D=t=>{let s=1732584193;for(let a=0;a<t.length;a++)s=(s<<5)-s+t[a]&4294967295,s=s^s>>>16;const o=new Uint8Array(20);for(let a=0;a<20;a++)o[a]=s>>>a*8&255;return o},G=t=>{if(t.length===0)return"";let s="",o=BigInt("0x"+u(t));const a=BigInt(58);for(;o>0;)s=$[Number(o%a)]+s,o=o/a;for(let l=0;l<t.length&&t[l]===0;l++)s="1"+s;return s},M=async()=>{m(!0),setTimeout(()=>{const t=new Uint8Array(32);crypto.getRandomValues(t);const s=u(t);N(s),h(2),m(!1)},800)},Y=async()=>{x.trim()&&(m(!0),setTimeout(async()=>{const s=new TextEncoder().encode(x),o=await crypto.subtle.digest("SHA-256",s),a=new Uint8Array(o),l=u(a);N(l),h(2),m(!1)},800))},L=()=>{p&&(m(!0),setTimeout(()=>{var o;const t=new Uint8Array(((o=p.match(/.{1,2}/g))==null?void 0:o.map(a=>parseInt(a,16)))||[]),s=F(t);k(u(s.uncompressed)),C(u(s.compressed)),h(3),m(!1)},800))},q=async()=>{b&&(m(!0),setTimeout(async()=>{var l;const t=new Uint8Array(((l=b.match(/.{1,2}/g))==null?void 0:l.map(i=>parseInt(i,16)))||[]),s=await crypto.subtle.digest("SHA-256",t),o=new Uint8Array(s),a=D(o);S(u(o)),B(u(a)),h(4),m(!1)},800))},V=async()=>{g&&(m(!0),setTimeout(async()=>{var f;const t=new Uint8Array(((f=g.match(/.{1,2}/g))==null?void 0:f.map(X=>parseInt(X,16)))||[]),s=new Uint8Array(21);s[0]=0,s.set(t,1);const o=await crypto.subtle.digest("SHA-256",s),a=await crypto.subtle.digest("SHA-256",o),l=new Uint8Array(a).slice(0,4),i=new Uint8Array(25);i.set(s,0),i.set(l,21);const w=G(i);K(w),P({completed:!0,message:"Congratulations! You've generated a complete Bitcoin key pair and address using real cryptographic algorithms!",success:!0}),setTimeout(E,2e3),m(!1)},800))},W=()=>{h(1),N(""),k(""),C(""),S(""),B(""),K(""),P({completed:!1,message:"",success:!1})};return e.jsxs("div",{className:"py-6",children:[e.jsxs("div",{className:"mb-8 p-6 rounded-lg",style:{backgroundColor:"rgba(8, 28, 36, 0.6)"},children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",style:{color:r.colors.primary},children:"Bitcoin Key Generation Challenge"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Learn how Bitcoin creates cryptographic keys using the same algorithms as real Bitcoin wallets. This process involves generating a random private key, deriving a public key using elliptic curve cryptography, and creating a user-friendly address."}),e.jsxs("div",{className:`space-y-4 mb-6 p-4 rounded-lg ${c>=1?"bg-black/20":"bg-black/10 opacity-50"}`,children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("span",{className:`w-8 h-8 rounded-full flex items-center justify-center mr-3 text-sm font-bold ${c>=1?"text-white":"text-gray-500"}`,style:{backgroundColor:c>=1?r.colors.primary:"#6b7280"},children:"1"}),e.jsx("h4",{className:"text-lg font-semibold",style:{color:r.colors.secondary},children:"Generate Random Private Key"})]}),e.jsx("p",{className:"text-gray-300 text-sm mb-4",children:"A private key is a random 256-bit number (32 bytes). This is your secret - never share it! Think of it like the master key to your digital safe."}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("button",{onClick:M,disabled:n,className:"px-4 py-2 rounded text-white font-medium flex items-center text-sm",style:{backgroundColor:r.colors.primary,opacity:n?.7:1},children:n?e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"mr-2 h-4 w-4"}),"Generate Random"]})}),e.jsxs("button",{onClick:()=>R(!H),className:"px-4 py-2 rounded text-white font-medium flex items-center text-sm",style:{backgroundColor:r.colors.secondary},children:[e.jsx(T,{className:"mr-2 h-4 w-4"}),"Use Custom Seed"]})]}),H&&e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{type:"text",value:x,onChange:t=>U(t.target.value),placeholder:"Enter any text (will be hashed to create private key)",className:"w-full p-3 bg-black/40 text-gray-100 border rounded-md text-base",style:{borderColor:`${r.colors.secondary}40`}}),e.jsx("button",{onClick:Y,disabled:!x.trim()||n,className:"mt-2 px-4 py-2 rounded text-white font-medium text-sm",style:{backgroundColor:r.colors.secondary,opacity:!x.trim()||n?.7:1},children:"Generate from Seed"}),e.jsx("p",{className:"text-xs text-yellow-400 mt-1",children:"âš ï¸ Never use predictable text for real Bitcoin keys!"})]}),p&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:r.colors.secondary},children:"Private Key (256-bit / 32 bytes):"}),e.jsx("div",{className:"font-mono text-sm p-3 rounded-md overflow-x-auto",style:{backgroundColor:"rgba(6, 214, 160, 0.1)",color:r.colors.accent1},children:v(p)})]})]}),e.jsxs("div",{className:`space-y-4 mb-6 p-4 rounded-lg ${c>=2?"bg-black/20":"bg-black/10 opacity-50"}`,children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("span",{className:`w-8 h-8 rounded-full flex items-center justify-center mr-3 text-sm font-bold ${c>=2?"text-white":"text-gray-500"}`,style:{backgroundColor:c>=2?r.colors.primary:"#6b7280"},children:"2"}),e.jsx("h4",{className:"text-lg font-semibold",style:{color:r.colors.secondary},children:"Derive Public Key (SECP256K1 Elliptic Curve)"})]}),e.jsx("p",{className:"text-gray-300 text-sm mb-4",children:"Bitcoin uses elliptic curve cryptography to derive your public key from your private key. This is a one-way mathematical function - you can't reverse it to find the private key!"}),e.jsx("button",{onClick:L,disabled:c<2||n,className:"px-4 py-2 rounded text-white font-medium flex items-center text-sm mb-4",style:{backgroundColor:c>=2?r.colors.primary:"#6b7280",opacity:c<2||n?.7:1},children:n?e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"mr-2 h-4 w-4 animate-spin"}),"Computing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"mr-2 h-4 w-4"}),"Derive Public Key"]})}),b&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:r.colors.secondary},children:"Public Key (Compressed - 33 bytes):"}),e.jsx("div",{className:"font-mono text-sm p-3 rounded-md overflow-x-auto",style:{backgroundColor:"rgba(6, 214, 160, 0.1)",color:r.colors.accent1},children:v(b)}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Starts with '02' or '03' + X coordinate (Y can be calculated)"})]})})]}),e.jsxs("div",{className:`space-y-4 mb-6 p-4 rounded-lg ${c>=3?"bg-black/20":"bg-black/10 opacity-50"}`,children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("span",{className:`w-8 h-8 rounded-full flex items-center justify-center mr-3 text-sm font-bold ${c>=3?"text-white":"text-gray-500"}`,style:{backgroundColor:c>=3?r.colors.primary:"#6b7280"},children:"3"}),e.jsx("h4",{className:"text-lg font-semibold",style:{color:r.colors.secondary},children:"Hash Public Key (SHA-256 + RIPEMD-160)"})]}),e.jsx("p",{className:"text-gray-300 text-sm mb-4",children:'Bitcoin applies two hash functions to create a shorter, more manageable address. This creates a unique "fingerprint" of your public key.'}),e.jsx("button",{onClick:q,disabled:c<3||n,className:"px-4 py-2 rounded text-white font-medium flex items-center text-sm mb-4",style:{backgroundColor:c>=3?r.colors.primary:"#6b7280",opacity:c<3||n?.7:1},children:n?e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"mr-2 h-4 w-4 animate-spin"}),"Hashing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"mr-2 h-4 w-4"}),"Hash Public Key"]})}),g&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:r.colors.secondary},children:"RIPEMD-160 Hash (20 bytes):"}),e.jsx("div",{className:"font-mono text-sm p-3 rounded-md overflow-x-auto",style:{backgroundColor:"rgba(6, 214, 160, 0.1)",color:r.colors.accent1},children:v(g)})]})})]}),e.jsxs("div",{className:`space-y-4 mb-6 p-4 rounded-lg ${c>=4?"bg-black/20":"bg-black/10 opacity-50"}`,children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("span",{className:`w-8 h-8 rounded-full flex items-center justify-center mr-3 text-sm font-bold ${c>=4?"text-white":"text-gray-500"}`,style:{backgroundColor:c>=4?r.colors.primary:"#6b7280"},children:"4"}),e.jsx("h4",{className:"text-lg font-semibold",style:{color:r.colors.secondary},children:"Create Bitcoin Address (Base58Check)"})]}),e.jsx("p",{className:"text-gray-300 text-sm mb-4",children:"The final step adds version bytes and a checksum, then encodes in Base58 to create the familiar Bitcoin address format that's safe to share publicly."}),e.jsx("button",{onClick:V,disabled:c<4||n,className:"px-4 py-2 rounded text-white font-medium flex items-center text-sm mb-4",style:{backgroundColor:c>=4?r.colors.primary:"#6b7280",opacity:c<4||n?.7:1},children:n?e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"mr-2 h-4 w-4 animate-spin"}),"Encoding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),"Create Address"]})}),A&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:r.colors.secondary},children:"Bitcoin Address (Base58):"}),e.jsx("div",{className:"font-mono text-lg p-3 rounded-md overflow-x-auto font-bold",style:{backgroundColor:"rgba(6, 214, 160, 0.2)",color:r.colors.primary},children:A}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"âœ… Your Bitcoin address - safe to share publicly!"})]})]}),e.jsxs("div",{className:"mt-6 p-4 rounded-md bg-red-900/20 border border-red-500/50",children:[e.jsx("h4",{className:"text-sm font-semibold mb-2 text-red-400",children:"ðŸš¨ Security Warning"}),e.jsx("p",{className:"text-red-300 text-sm",children:"This is educational only. Never use these keys for real Bitcoin! Real wallets use much more sophisticated security measures."})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:W,className:"px-6 py-2 rounded text-white font-medium",style:{backgroundColor:r.colors.secondary},children:"ðŸ”„ Start Over"})}),y.message&&e.jsx("div",{className:`mt-6 p-3 rounded-md ${y.success?"bg-green-900/30":"bg-red-900/30"}`,style:{borderLeft:`4px solid ${y.success?"#10b981":"#ef4444"}`},children:e.jsx("p",{className:y.success?"text-green-400":"text-red-400",children:y.message})})]}),y.completed&&e.jsxs("div",{className:"text-center p-4 rounded-lg border",style:{backgroundColor:"rgba(6, 214, 160, 0.1)",borderColor:`${r.colors.primary}40`},children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",style:{color:r.colors.primary},children:"Challenge Complete!"}),e.jsx("p",{className:"text-gray-300",children:"You've successfully generated a Bitcoin key pair using the same cryptographic algorithms as real Bitcoin wallets: SECP256K1 elliptic curves, SHA-256, RIPEMD-160, and Base58Check encoding!"})]})]})}export{ce as default};
