import{j as e}from"./index-Cb9N_GOt.js";import{r as l}from"./react-Q3K9tvtn.js";const S=({onComplete:x})=>{const[o,b]=l.useState([]),[a,f]=l.useState([]),[d,c]=l.useState(null),[j,m]=l.useState([]),[h,u]=l.useState(!1),[g,p]=l.useState(0);l.useEffect(()=>{b([{id:1,name:"Mama Nia",has:"Yams",wants:"Pot",position:{x:20,y:30}},{id:2,name:"Uncle Kofi",has:"Pot",wants:"Milk",position:{x:75,y:20}},{id:3,name:"Auntie Zari",has:"Milk",wants:"Fish",position:{x:65,y:65}},{id:4,name:"Brother Kwame",has:"Fish",wants:"Salt",position:{x:25,y:75}},{id:5,name:"Grandmother Asha",has:"Salt",wants:"Yams",position:{x:40,y:45}}])},[]),l.useEffect(()=>{if(a.length===o.length&&o.length>0){const s=a.every(r=>{const n=o.find(i=>i.id===r.from),t=o.find(i=>i.id===r.to);return n&&t&&n.has===t.wants});if(u(s),s){const r=a.map(n=>{const t=o.find(i=>i.id===n.from);return t?{fromId:n.from,toId:n.to,item:t.has}:null}).filter(n=>n!==null);m(r),x&&x()}else m([])}else u(!1),m([])},[a,o,x]);const v=s=>{if(d===null)c(s);else if(d===s)c(null);else{const r=a.find(t=>t.from===d),n=a.find(t=>t.to===s);!r&&!n&&(f(t=>[...t,{from:d,to:s}]),p(t=>t+1)),c(null)}},N=()=>{f([]),c(null),m([]),u(!1),p(0)},y=s=>{const r=o.find(t=>t.id===s.from),n=o.find(t=>t.id===s.to);return r&&n?{x1:`${r.position.x}%`,y1:`${r.position.y}%`,x2:`${n.position.x}%`,y2:`${n.position.y}%`}:null},w=s=>{const r=o.find(t=>t.id===s.from),n=o.find(t=>t.id===s.to);return r!==void 0&&n!==void 0&&r.has===n.wants};return e.jsxs("div",{className:"w-full max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-orange-50 rounded-xl p-6 mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-serif text-orange-800",children:"Barter Web Challenge"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-orange-700",children:["Attempts: ",g]}),e.jsx("button",{onClick:N,className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition",children:"Reset"})]})]}),e.jsxs("div",{className:"relative bg-amber-100 border-2 border-amber-200 rounded-xl aspect-square w-full mb-6",children:[e.jsx("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",children:a.map((s,r)=>{const n=y(s);if(!n)return null;const t=w(s);return e.jsx("line",{x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2,stroke:t?"#16a34a":"#dc2626",strokeWidth:"3",strokeDasharray:t?"":"5,5"},`line-${r}`)})}),o.map(s=>{const r=d===s.id,n=a.some(t=>t.from===s.id||t.to===s.id);return e.jsx("div",{className:`absolute w-24 rounded-lg p-3 cursor-pointer transition-all ${r?"bg-orange-300 border-2 border-orange-500":n?"bg-orange-200 border-2 border-orange-400":"bg-white border-2 border-orange-200 hover:border-orange-300"} ${h?"animate-pulse":""}`,style:{left:`calc(${s.position.x}% - 3rem)`,top:`calc(${s.position.y}% - 3rem)`,zIndex:r?10:1},onClick:()=>v(s.id),children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-bold text-orange-800",children:s.name}),e.jsxs("div",{className:"mt-1 text-xs",children:[e.jsxs("div",{className:"bg-amber-100 rounded px-2 py-1 mb-1",children:["Has: ",e.jsx("span",{className:"font-semibold",children:s.has})]}),e.jsxs("div",{className:"bg-blue-100 rounded px-2 py-1",children:["Wants: ",e.jsx("span",{className:"font-semibold",children:s.wants})]})]})]})},s.id)})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-orange-200",children:[e.jsxs("p",{className:"text-orange-800 mb-4",children:[e.jsx("strong",{children:"Instructions:"})," Connect traders by clicking on them to create successful trades. Each person must trade what they have for what someone else wants."]}),h&&e.jsxs("div",{className:"bg-green-100 border border-green-300 rounded-lg p-4 text-green-800",children:[e.jsx("h3",{className:"font-bold text-lg mb-2",children:"Success! All trades complete!"}),e.jsxs("p",{children:["You've created a perfect barter web in ",g," attempts."]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("h4",{className:"font-semibold",children:"Completed Trades:"}),e.jsx("ul",{className:"list-disc pl-5 mt-1",children:j.map((s,r)=>{const n=o.find(i=>i.id===s.fromId),t=o.find(i=>i.id===s.toId);return n&&t?e.jsxs("li",{children:[n.name," gave ",s.item," to ",t.name]},r):null})})]})]}),!h&&a.length>0&&e.jsx("div",{className:"text-orange-700",children:"Keep working on creating valid connections between all traders."})]})]}),e.jsxs("div",{className:"bg-orange-100 rounded-xl p-6",children:[e.jsx("h3",{className:"text-xl font-serif text-orange-800 mb-3",children:"Reflection Question"}),e.jsx("p",{className:"text-orange-700 border-l-4 border-orange-500 pl-4 py-2 mb-4",children:"If your village had no money, how would you trade for medicine?"}),e.jsx("textarea",{className:"w-full p-3 border border-orange-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",rows:4,placeholder:"Type your thoughts..."})]})]})};export{S as default};
