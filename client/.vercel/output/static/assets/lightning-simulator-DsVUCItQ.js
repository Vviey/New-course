import{j as e,p as s,U as E,A as I}from"./index-Cb9N_GOt.js";import{r as x}from"./react-Q3K9tvtn.js";import{C as u}from"./clock-BqnukmBP.js";import{L as U}from"./lock-DhB5_l0_.js";import{Z}from"./zap-Df9qtAyF.js";import{L as D}from"./lock-open-DhJzDle9.js";function Q({onComplete:S}){var y,j,f,N,C,B,w,k,v,T,L,O;const[p,h]=x.useState("opening"),[n,d]=x.useState([]),[b,A]=x.useState([]),[r,F]=x.useState({completed:!1,message:"",success:!1}),[c,i]=x.useState(!1),a=t=>{const o=new Date().toLocaleTimeString();A(l=>[...l,`${o}: ${t}`])},P=()=>{c||(i(!0),a("Alice initiating channel opening with Bob..."),setTimeout(()=>{d([{id:"alice-bob-001",participants:["Alice","Bob"],capacity:1,aliceBalance:.8,bobBalance:.2,isOpen:!0,onChain:!0}]),a("✅ On-chain transaction confirmed! Channel opened with 1.0 BTC capacity"),a("💰 Alice: 0.8 BTC, Bob: 0.2 BTC in channel"),i(!1),h("payments")},2e3))},$=t=>{c||(i(!0),a(`Alice sending ${t} BTC to Bob...`),setTimeout(()=>{var o,l;d(Y=>Y.map(m=>m.id==="alice-bob-001"?{...m,aliceBalance:m.aliceBalance-t,bobBalance:m.bobBalance+t}:m)),a("⚡ Payment sent instantly! No on-chain transaction needed"),a(`💰 New balances - Alice: ${((o=n[0])==null?void 0:o.aliceBalance)-t||0} BTC, Bob: ${((l=n[0])==null?void 0:l.bobBalance)+t||0} BTC`),i(!1)},1e3))},H=()=>{c||(i(!0),a("Alice wants to pay Carol but has no direct channel..."),setTimeout(()=>{const t={id:"bob-carol-001",participants:["Bob","Carol"],capacity:.5,aliceBalance:0,bobBalance:.3,isOpen:!0,onChain:!1};d(o=>[...o,t]),a("Setting up routing path: Alice → Bob → Carol"),setTimeout(()=>{a("🔐 Using HTLC (Hash Time-Locked Contract) for security"),a("🧅 Payment routed with onion encryption for privacy"),a("⚡ 0.1 BTC successfully routed from Alice to Carol!"),d(o=>o.map(l=>l.id==="alice-bob-001"?{...l,aliceBalance:l.aliceBalance-.1,bobBalance:l.bobBalance+.1}:l.id==="bob-carol-001"?{...l,bobBalance:l.bobBalance-.1,aliceBalance:l.aliceBalance+.1}:l)),i(!1),h("closing")},1500)},1500))},R=()=>{c||(i(!0),a("Alice initiating channel closure..."),setTimeout(()=>{a("📡 Broadcasting final channel state to Bitcoin blockchain"),a("⛓️ On-chain settlement transaction confirmed"),a("💰 Final balances settled on Bitcoin base layer"),d(t=>t.map(o=>({...o,isOpen:!1,onChain:!0}))),F({completed:!0,message:"Congratulations! You've successfully completed the Lightning Network simulation.",success:!0}),i(!1),h("completed"),setTimeout(S,2e3)},2e3))},M=()=>{var t;switch(p){case"opening":return e.jsx("button",{onClick:P,disabled:c,className:"px-4 py-2 rounded text-white font-medium flex items-center",style:{backgroundColor:s.colors.primary,opacity:c?.7:1},children:c?e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"mr-2 h-4 w-4 animate-spin"}),"Opening Channel..."]}):e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"mr-2 h-4 w-4"}),"Open Channel"]})});case"payments":return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>$(.1),disabled:c||!((t=n[0])!=null&&t.isOpen),className:"px-4 py-2 rounded text-white font-medium flex items-center mr-2",style:{backgroundColor:s.colors.secondary},children:[e.jsx(Z,{className:"mr-2 h-4 w-4"}),"Send 0.1 BTC"]}),e.jsxs("button",{onClick:()=>h("routing"),disabled:c,className:"px-4 py-2 rounded text-white font-medium flex items-center",style:{backgroundColor:s.colors.accent1},children:[e.jsx(I,{className:"mr-2 h-4 w-4"}),"Try Multi-hop Payment"]})]});case"routing":return e.jsx("button",{onClick:H,disabled:c,className:"px-4 py-2 rounded text-white font-medium flex items-center",style:{backgroundColor:s.colors.accent2},children:c?e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"mr-2 h-4 w-4 animate-spin"}),"Routing Payment..."]}):e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),"Route via Bob"]})});case"closing":return e.jsx("button",{onClick:R,disabled:c,className:"px-4 py-2 rounded text-white font-medium flex items-center",style:{backgroundColor:s.colors.primary},children:c?e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"mr-2 h-4 w-4 animate-spin"}),"Closing Channel..."]}):e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"mr-2 h-4 w-4"}),"Close Channel"]})});default:return null}},g=()=>{switch(p){case"opening":return{title:"🔓 Step 1: Open a Payment Channel",description:"Alice and Bob will lock Bitcoin in a multi-signature address to create a payment channel."};case"payments":return{title:"⚡ Step 2: Send Lightning Payments",description:"Now you can send instant payments between Alice and Bob with no on-chain transactions."};case"routing":return{title:"🔗 Step 3: Multi-hop Payment Routing",description:"Alice can pay Carol even without a direct channel by routing through Bob."};case"closing":return{title:"🔒 Step 4: Close the Channel",description:"When finished, the channel can be closed and final balances settled on-chain."};case"completed":return{title:"✅ Simulation Complete!",description:"You've experienced the full Lightning Network workflow!"};default:return{title:"",description:""}}};return e.jsxs("div",{className:"py-6",children:[e.jsxs("div",{className:"mb-8 p-6 rounded-lg",style:{backgroundColor:"rgba(8, 28, 36, 0.6)"},children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",style:{color:s.colors.primary},children:"⚡ Lightning Network Interactive Simulation"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Experience how the Lightning Network enables instant, cheap Bitcoin payments through payment channels. Follow Alice, Bob, and Carol as they open channels, send payments, and settle on-chain."}),e.jsxs("div",{className:"mb-6 p-4 bg-black/30 rounded-md",children:[e.jsx("h4",{className:"text-sm font-semibold mb-3",style:{color:s.colors.secondary},children:"Lightning Network Participants:"}),e.jsxs("div",{className:"flex justify-center items-center space-x-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center mb-2",style:{backgroundColor:s.colors.primary},children:e.jsx("span",{className:"text-white font-bold",children:"A"})}),e.jsx("p",{className:"text-xs text-gray-300",children:"Alice"}),e.jsxs("p",{className:"text-xs",style:{color:s.colors.accent1},children:[((j=(y=n[0])==null?void 0:y.aliceBalance)==null?void 0:j.toFixed(1))||"1.0"," BTC"]})]}),n.length>0&&e.jsxs("div",{className:"flex-1 flex items-center",children:[e.jsx("div",{className:"flex-1 h-1 rounded",style:{backgroundColor:(f=n[0])!=null&&f.isOpen?s.colors.accent1:"gray"}}),e.jsx("div",{className:"mx-2 text-xs text-gray-400",children:(N=n[0])!=null&&N.isOpen?"⚡ Open":"🔒 Closed"}),e.jsx("div",{className:"flex-1 h-1 rounded",style:{backgroundColor:(C=n[0])!=null&&C.isOpen?s.colors.accent1:"gray"}})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center mb-2",style:{backgroundColor:s.colors.secondary},children:e.jsx("span",{className:"text-white font-bold",children:"B"})}),e.jsx("p",{className:"text-xs text-gray-300",children:"Bob"}),e.jsxs("p",{className:"text-xs",style:{color:s.colors.accent1},children:[((w=(B=n[0])==null?void 0:B.bobBalance)==null?void 0:w.toFixed(1))||"0.5"," BTC"]})]}),n.length>1&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 flex items-center",children:[e.jsx("div",{className:"flex-1 h-1 rounded",style:{backgroundColor:(k=n[1])!=null&&k.isOpen?s.colors.accent2:"gray"}}),e.jsx("div",{className:"mx-2 text-xs text-gray-400",children:(v=n[1])!=null&&v.isOpen?"⚡ Open":"🔒 Closed"}),e.jsx("div",{className:"flex-1 h-1 rounded",style:{backgroundColor:(T=n[1])!=null&&T.isOpen?s.colors.accent2:"gray"}})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center mb-2",style:{backgroundColor:s.colors.accent2},children:e.jsx("span",{className:"text-white font-bold",children:"C"})}),e.jsx("p",{className:"text-xs text-gray-300",children:"Carol"}),e.jsxs("p",{className:"text-xs",style:{color:s.colors.accent1},children:[((O=(L=n[1])==null?void 0:L.aliceBalance)==null?void 0:O.toFixed(1))||"0.3"," BTC"]})]})]})]})]}),n.length>0&&e.jsxs("div",{className:"mb-6 p-4 bg-black/30 rounded-md",children:[e.jsx("h4",{className:"text-sm font-semibold mb-3",style:{color:s.colors.secondary},children:"Active Channels:"}),n.map((t,o)=>e.jsxs("div",{className:"mb-2 p-3 bg-black/20 rounded border-l-4",style:{borderLeftColor:s.colors.accent1},children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:t.participants.join(" ↔ ")}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${t.isOpen?"bg-green-900/30 text-green-400":"bg-red-900/30 text-red-400"}`,children:t.isOpen?"Open":"Closed"})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-400",children:["Capacity: ",t.capacity," BTC |",t.participants[0],": ",t.aliceBalance.toFixed(1)," BTC |",t.participants[1],": ",t.bobBalance.toFixed(1)," BTC"]})]},t.id))]}),e.jsxs("div",{className:"mb-4 p-4 rounded-md",style:{backgroundColor:"rgba(6, 214, 160, 0.1)"},children:[e.jsx("h4",{className:"text-sm font-semibold mb-2",style:{color:s.colors.primary},children:g().title}),e.jsx("p",{className:"text-sm text-gray-300",children:g().description})]}),e.jsx("div",{className:"mb-6",children:M()}),e.jsxs("div",{className:"mb-6 p-4 bg-black/30 rounded-md",children:[e.jsx("h4",{className:"text-sm font-semibold mb-2",style:{color:s.colors.secondary},children:"Transaction History:"}),e.jsx("div",{className:"max-h-32 overflow-y-auto",children:b.length===0?e.jsx("p",{className:"text-xs text-gray-500",children:"No transactions yet..."}):b.map((t,o)=>e.jsx("p",{className:"text-xs text-gray-300 mb-1 font-mono",children:t},o))})]}),e.jsxs("div",{className:"bg-black/30 p-4 rounded-md",children:[e.jsx("h4",{className:"text-sm font-semibold mb-2",style:{color:s.colors.secondary},children:"Key Lightning Network Concepts:"}),e.jsxs("ul",{className:"text-sm space-y-2 text-gray-300",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block mr-2 mt-1 h-1.5 w-1.5 rounded-full",style:{backgroundColor:s.colors.accent1}}),e.jsxs("span",{children:[e.jsx("strong",{children:"Payment Channels:"})," Multi-signature Bitcoin addresses that enable off-chain transactions."]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block mr-2 mt-1 h-1.5 w-1.5 rounded-full",style:{backgroundColor:s.colors.accent1}}),e.jsxs("span",{children:[e.jsx("strong",{children:"HTLCs:"})," Hash Time-Locked Contracts ensure atomic payments across the network."]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block mr-2 mt-1 h-1.5 w-1.5 rounded-full",style:{backgroundColor:s.colors.accent1}}),e.jsxs("span",{children:[e.jsx("strong",{children:"Routing:"})," Payments can be sent through intermediate nodes without direct channels."]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block mr-2 mt-1 h-1.5 w-1.5 rounded-full",style:{backgroundColor:s.colors.accent1}}),e.jsxs("span",{children:[e.jsx("strong",{children:"Settlement:"})," Final balances are recorded on the Bitcoin blockchain when channels close."]})]})]})]}),r.message&&e.jsx("div",{className:`mt-6 p-3 rounded-md ${r.success?"bg-green-900/30":"bg-red-900/30"}`,style:{borderLeft:`4px solid ${r.success?"#10b981":"#ef4444"}`},children:e.jsx("p",{className:r.success?"text-green-400":"text-red-400",children:r.message})})]}),r.completed&&e.jsxs("div",{className:"text-center p-4 rounded-lg border",style:{backgroundColor:"rgba(6, 214, 160, 0.1)",borderColor:`${s.colors.primary}40`},children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",style:{color:s.colors.primary},children:"Lightning Network Mastery Achieved! ⚡"}),e.jsx("p",{className:"text-gray-300",children:"You've successfully experienced how Lightning Network enables instant, cheap Bitcoin payments while maintaining security through the base layer. You now understand payment channels, routing, and settlement - the core building blocks of Bitcoin's scaling solution."})]})]})}export{Q as default};
