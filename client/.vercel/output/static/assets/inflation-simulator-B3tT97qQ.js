import{j as e}from"./index-Cb9N_GOt.js";import{r as n}from"./react-Q3K9tvtn.js";const M=({onComplete:x})=>{const[l,j]=n.useState(1),[c,y]=n.useState(1e3),[o,f]=n.useState([{id:1,name:"Bread",basePrice:50,currentPrice:50,inflationRate:.05,quantity:0},{id:2,name:"Fish",basePrice:100,currentPrice:100,inflationRate:.08,quantity:0},{id:3,name:"Salt",basePrice:25,currentPrice:25,inflationRate:.03,quantity:0},{id:4,name:"Cloth",basePrice:200,currentPrice:200,inflationRate:.1,quantity:0}]),[g,P]=n.useState(.05),[b,S]=n.useState(1e3),[u,p]=n.useState(!1),[d,N]=n.useState(!1),[v,w]=n.useState([]);n.useEffect(()=>{let s;return u&&!d&&(s=setInterval(()=>{j(a=>a+1)},b)),()=>{s&&clearInterval(s)}},[u,b,d]),n.useEffect(()=>{l>1&&(f(a=>a.map(r=>({...r,currentPrice:Math.round(r.currentPrice*(1+r.inflationRate*g))}))),i(`Day ${l}: Prices increased due to inflation.`),o.some(a=>a.currentPrice<=c)||(N(!0),p(!1),i(`Day ${l}: You can no longer afford any items. Game over!`),x&&x()))},[l,o,c,g,x]);const i=s=>{w(a=>[s,...a].slice(0,10))},R=s=>{const a=o.find(r=>r.id===s);a&&c>=a.currentPrice?(y(r=>r-a.currentPrice),f(r=>r.map(t=>t.id===s?{...t,quantity:t.quantity+1}:t)),i(`Day ${l}: Bought 1 ${a.name} for ${a.currentPrice} coins.`)):a&&i(`Day ${l}: Cannot afford ${a.name}.`)},k=()=>{p(s=>!s),i(u?`Day ${l}: Market paused.`:`Day ${l}: Market opened.`)},$=()=>{j(1),y(1e3),f(o.map(s=>({...s,currentPrice:s.basePrice,quantity:0}))),p(!1),N(!1),w([]),i("Game reset. New simulation started."),x&&d&&x()},q=()=>{const s=o.reduce((r,t)=>r+t.basePrice*t.quantity,0),a=o.reduce((r,t)=>r+t.currentPrice*t.quantity,0);return{originalValue:s,currentValue:a}},{originalValue:m,currentValue:h}=q();return e.jsxs("div",{className:"w-full max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-amber-50 rounded-xl p-6 mb-8 shadow-lg relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-orange-500 via-yellow-400 to-orange-500"}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-3xl font-serif text-orange-800 relative inline-block",children:["Inflation Simulator",e.jsx("span",{className:"absolute -bottom-2 left-0 w-full h-1 bg-orange-500"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-orange-700 font-semibold",children:["Day: ",l]}),e.jsx("button",{onClick:k,disabled:d,className:`px-4 py-2 ${u?"bg-red-500":"bg-green-500"} text-white rounded-lg transition border-2 border-yellow-300 hover:shadow-lg`,children:u?"Pause":"Start"}),e.jsx("button",{onClick:$,className:"px-4 py-2 bg-orange-500 text-white rounded-lg transition border-2 border-yellow-300 hover:shadow-lg",children:"Reset"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"md:col-span-2 bg-white p-4 rounded-xl border-2 border-yellow-300 shadow",children:[e.jsx("h3",{className:"text-xl font-serif text-orange-800 mb-4",children:"Market"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:o.map(s=>{const a=s.currentPrice-s.basePrice,r=(s.currentPrice/s.basePrice-1)*100;return e.jsxs("div",{className:"bg-amber-50 p-3 rounded-lg border-2 border-yellow-300 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"font-semibold text-orange-800",children:s.name}),e.jsxs("span",{className:"text-sm",children:["Owned: ",s.quantity]})]}),e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"font-bold text-orange-800",children:[s.currentPrice," coins"]}),e.jsx("div",{className:"text-xs",children:a>0?e.jsxs("span",{className:"text-red-600",children:["(+",a.toFixed(0)," coins / +",r.toFixed(1),"%)"]}):e.jsx("span",{children:"Base price"})})]}),e.jsx("button",{onClick:()=>R(s.id),disabled:s.currentPrice>c||d,className:`px-3 py-1 rounded bg-orange-500 text-white ${s.currentPrice>c?"opacity-50 cursor-not-allowed":"hover:bg-orange-600"}`,children:"Buy"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:e.jsx("div",{className:"bg-orange-500 h-2 rounded-full",style:{width:`${Math.min(r*2,100)}%`}})})]},s.id)})}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-amber-100 rounded-lg border-2 border-yellow-300",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-orange-800 mb-1",children:"Inflation Rate:"}),e.jsx("input",{type:"range",min:"0",max:"0.2",step:"0.01",value:g,onChange:s=>P(parseFloat(s.target.value)),className:"w-32 accent-orange-500"}),e.jsxs("span",{className:"ml-2 text-orange-800",children:[(g*100).toFixed(0),"%"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-orange-800 mb-1",children:"Game Speed:"}),e.jsx("input",{type:"range",min:"500",max:"2000",step:"100",value:b,onChange:s=>S(parseInt(s.target.value)),className:"w-32 accent-orange-500"}),e.jsxs("span",{className:"ml-2 text-orange-800",children:[b,"ms"]})]})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-xl border-2 border-yellow-300 shadow flex flex-col",children:[e.jsx("h3",{className:"text-xl font-serif text-orange-800 mb-4",children:"Your Resources"}),e.jsx("div",{className:"mb-4 p-3 bg-amber-50 rounded-lg border-2 border-yellow-300",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-orange-800",children:"Money:"}),e.jsxs("span",{className:"font-bold text-orange-800",children:[c," coins"]})]})}),e.jsxs("div",{className:"mb-4 p-3 bg-amber-50 rounded-lg border-2 border-yellow-300",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-orange-800",children:"Purchases value (original):"}),e.jsxs("span",{className:"block font-bold text-orange-800",children:[m," coins"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-orange-800",children:"Purchases value (current):"}),e.jsxs("span",{className:"block font-bold text-orange-800",children:[h," coins"]})]}),m>0&&e.jsx("div",{className:"mt-2 text-sm",children:e.jsxs("span",{className:h>m?"text-green-600":"text-red-600",children:[h>m?"Gained":"Lost"," ",Math.abs(h-m)," coins in value"]})})]}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("h4",{className:"text-orange-800 font-semibold mb-2",children:"Market Log:"}),e.jsxs("div",{className:"bg-amber-50 p-2 rounded-lg border-2 border-yellow-300 h-64 overflow-y-auto",children:[v.map((s,a)=>e.jsx("div",{className:"text-sm mb-1 text-orange-800",children:s},a)),v.length===0&&e.jsx("div",{className:"text-sm italic text-orange-800",children:"Press Start to begin simulation"})]})]})]})]}),d&&e.jsxs("div",{className:"mt-6 bg-red-50 p-4 rounded-xl border-2 border-red-300",children:[e.jsx("h3",{className:"text-xl font-serif text-red-800 mb-2",children:"Game Over!"}),e.jsx("p",{className:"text-red-700",children:"You can no longer afford any items due to inflation. This is what happens when currency loses its value too quickly."})]})]}),e.jsxs("div",{className:"bg-orange-50 rounded-xl p-6 relative overflow-hidden border-2 border-orange-300",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-orange-500 via-yellow-400 to-orange-500"}),e.jsx("h3",{className:"text-xl font-serif text-orange-800 mb-3",children:"Reflection Question"}),e.jsx("p",{className:"text-orange-700 border-l-4 border-orange-500 pl-4 py-2 mb-4 bg-orange-50",children:"How does inflation affect the purchasing power of a currency? What strategies could you use to protect your wealth?"}),e.jsx("textarea",{className:"w-full p-3 border-2 border-yellow-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 bg-white",rows:4,placeholder:"Type your thoughts..."})]})]})};export{M as default};
