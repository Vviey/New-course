import{j as e,p as n,U as W}from"./index-Cb9N_GOt.js";import{r as m}from"./react-Q3K9tvtn.js";import{C as R}from"./check-KWJc-uHV.js";import{R as N}from"./refresh-cw-C2iCUXhH.js";import{S as q}from"./server-9dZYDyNR.js";import{S as K}from"./send-Dhf89aQX.js";import{B as Q}from"./book-open-B5li3435.js";import{T as X}from"./triangle-alert-Bo9vNVKV.js";function ae({onComplete:V}){var A,E;const[r,f]=m.useState(1),[B,M]=m.useState("full"),[u,k]=m.useState([]),[a,w]=m.useState(null),[g,P]=m.useState(null),[p,L]=m.useState(null),[b,C]=m.useState({valid:!1,votes:[]}),[d,S]=m.useState(null),[j,F]=m.useState({totalNodes:0,consensusLevel:100,avgBlockHeight:0}),[y,$]=m.useState({completed:!1,message:"",success:!1}),[o,h]=m.useState(!1),v={full:{icon:"🏛️",name:"Full Node Library",description:"Stores complete blockchain encyclopedia, validates everything",storage:"500+ GB",features:["Full validation","Complete history","Independent verification"],color:"text-green-400",bgColor:"bg-green-900/20"},spv:{icon:"📱",name:"SPV Light Node",description:"Visitor who checks index cards, trusts but verifies",storage:"~1 MB",features:["Block headers only","Trust full nodes","Fast sync"],color:"text-blue-400",bgColor:"bg-blue-900/20"},mining:{icon:"⛏️",name:"Mining Node Publisher",description:"Creates new encyclopedia volumes, validates and publishes",storage:"500+ GB + Mining",features:["Full validation","Block creation","Consensus participation"],color:"text-orange-400",bgColor:"bg-orange-900/20"}},Y=()=>"node_"+Math.random().toString(16).substring(2,8),T=()=>({id:"tx_"+Math.random().toString(16).substring(2,10),from:"1Alice"+Math.random().toString(16).substring(2,6),to:"1Bob"+Math.random().toString(16).substring(2,6),amount:(Math.random()*5).toFixed(2),fee:Math.floor(Math.random()*50)+10,signature:"sig_"+Math.random().toString(16).substring(2,12),valid:Math.random()>.1}),D=()=>[{type:"full",name:"University Library",baseHeight:8e5},{type:"full",name:"City Central Library",baseHeight:8e5},{type:"full",name:"Community Library",baseHeight:799999},{type:"spv",name:"Mobile Reader",baseHeight:8e5},{type:"spv",name:"Tablet User",baseHeight:8e5},{type:"mining",name:"Publishing House Alpha",baseHeight:8e5},{type:"mining",name:"Publishing House Beta",baseHeight:8e5}].map(t=>({id:Y(),type:t.type,name:t.name,connected:!0,blockHeight:t.baseHeight+Math.floor(Math.random()*2),mempool:[],validating:!1,status:"synced"})),I=()=>{h(!0),setTimeout(()=>{const s=D();k(s);const t={id:"user_node",type:B,name:`Your ${v[B].name}`,connected:!0,blockHeight:799998,mempool:[],validating:!1,status:"syncing",syncProgress:0};w(t);const i=s.reduce((l,x)=>l+x.blockHeight,0)/s.length;F({totalNodes:s.length+1,consensusLevel:100,avgBlockHeight:Math.round(i)}),f(2),h(!1)},1e3)},U=()=>{h(!0);let s=0;const t=setInterval(()=>{s+=20,w(i=>({...i,syncProgress:s,blockHeight:i.blockHeight+Math.floor(s/50),status:s>=100?"synced":"syncing"})),s>=100&&(clearInterval(t),f(3),h(!1))},500)},_=()=>{h(!0),setTimeout(()=>{const s=T();P(s);let t=0;u.forEach((i,l)=>{setTimeout(()=>{k(x=>x.map(c=>c.id===i.id?{...c,validating:!0,mempool:[...c.mempool,{...s,validatedBy:c.id}]}:c)),setTimeout(()=>{k(x=>x.map(c=>c.id===i.id?{...c,validating:!1}:c))},800)},t),t+=200}),setTimeout(()=>{f(4),h(!1)},t+1e3)},800)},z=()=>{h(!0),setTimeout(()=>{const s=u.find(l=>l.type==="mining"),t=[g,T(),T()],i={number:j.avgBlockHeight+1,previousHash:"000abc"+Math.random().toString(16).substring(2,10),merkleRoot:"merkle_"+Math.random().toString(16).substring(2,12),timestamp:Date.now(),transactions:t,minedBy:(s==null?void 0:s.name)||"Mining Node",nonce:Math.floor(Math.random()*1e6)};L(i),setTimeout(()=>{G(i)},1e3)},1500)},G=s=>{const t=[];let i=0;[...u,a].forEach((l,x)=>{l.type==="spv"?setTimeout(()=>{t.push({nodeId:l.id,nodeName:l.name,vote:"accept",reason:"Valid block header and PoW"}),C({valid:!0,votes:[...t]})},i):setTimeout(()=>{const c=Math.random()>.05;t.push({nodeId:l.id,nodeName:l.name,vote:c?"accept":"reject",reason:c?"All transactions valid":"Invalid transaction detected"}),C({valid:t.filter(H=>H.vote==="accept").length>t.length/2,votes:[...t]})},i),i+=300}),setTimeout(()=>{t.filter(l=>l.vote==="accept").length>t.length/2&&(k(l=>l.map(x=>({...x,blockHeight:Math.max(x.blockHeight,s.number),mempool:x.mempool.filter(c=>!s.transactions.find(H=>H.id===c.id))}))),w(l=>({...l,blockHeight:Math.max(l.blockHeight,s.number)}))),f(5),h(!1)},i+500)},O=()=>{h(!0),setTimeout(()=>{const s={number:j.avgBlockHeight+2,chain:"A",minedBy:"Publisher Alpha",transactions:2,supporters:["University Library","City Central Library","Your Node"]},t={number:j.avgBlockHeight+2,chain:"B",minedBy:"Publisher Beta",transactions:3,supporters:["Community Library","Mobile Reader"]};S({forkA:s,forkB:t,winner:null}),setTimeout(()=>{const i=Math.random()>.5?s:t;S(l=>({...l,winner:i})),$({completed:!0,message:"Congratulations! You've witnessed how Bitcoin nodes maintain consensus and resolve conflicts through the longest valid chain rule!",success:!0}),setTimeout(V,2e3),h(!1)},3e3)},800)},J=()=>{f(1),M("full"),k([]),w(null),P(null),L(null),C({valid:!1,votes:[]}),S(null),F({totalNodes:0,consensusLevel:100,avgBlockHeight:0}),$({completed:!1,message:"",success:!1})};return e.jsxs("div",{className:"py-6",children:[e.jsxs("div",{className:"mb-8 p-6 rounded-lg",style:{backgroundColor:"rgba(8, 28, 36, 0.6)"},children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",style:{color:n.colors.primary},children:"Bitcoin Nodes Challenge: Guardians of the Digital Library"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"Discover how Bitcoin nodes work together like a network of libraries, each maintaining and protecting the complete transaction history. Learn about different node types and their crucial roles in Bitcoin's decentralization."}),e.jsxs("div",{className:"mb-6 p-4 rounded-lg",style:{backgroundColor:"rgba(6, 214, 160, 0.1)"},children:[e.jsx("h4",{className:"font-semibold mb-3",style:{color:n.colors.primary},children:"📚 The Bitcoin Library Network"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-2xl mr-2",children:"🏛️"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Bitcoin Node = Library:"})," Stores and shares Bitcoin's transaction history"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-2xl mr-2",children:"📖"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Blockchain = Encyclopedia Set:"})," Each block is a volume, transactions are pages"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-2xl mr-2",children:"👨‍🏫"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Validation = Librarian Check:"})," Ensures new entries follow the rules"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-2xl mr-2",children:"✍️"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Mining = Publishing:"})," Creates new volumes for the encyclopedia"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-2xl mr-2",children:"🤝"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Consensus = Agreement:"})," All libraries must have matching sets"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-2xl mr-2",children:"🌐"}),e.jsxs("span",{children:[e.jsx("strong",{children:"P2P Network = Postal System:"})," Libraries share updates with each other"]})]})]})]})]}),e.jsxs("div",{className:`space-y-4 mb-6 p-4 rounded-lg ${r>=1?"bg-black/20":"bg-black/10 opacity-50"}`,children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("span",{className:`w-8 h-8 rounded-full flex items-center justify-center mr-3 text-sm font-bold ${r>=1?"text-white":"text-gray-500"}`,style:{backgroundColor:r>=1?n.colors.primary:"#6b7280"},children:"1"}),e.jsx("h4",{className:"text-lg font-semibold",style:{color:n.colors.secondary},children:"Choose Your Library Type"})]}),e.jsx("p",{className:"text-gray-300 text-sm mb-4",children:`Bitcoin has different types of "libraries" (nodes) that serve various purposes in the network. Choose what type of library you'd like to run and join the Bitcoin network.`}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:Object.entries(v).map(([s,t])=>e.jsxs("div",{onClick:()=>M(s),className:`p-4 rounded-lg cursor-pointer transition-all border-2 ${B===s?"border-blue-400":"border-gray-600"} ${t.bgColor}`,children:[e.jsxs("div",{className:"text-center mb-3",children:[e.jsx("div",{className:"text-3xl mb-2",children:t.icon}),e.jsx("h5",{className:`font-semibold ${t.color}`,children:t.name})]}),e.jsxs("div",{className:"text-xs text-gray-300 space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Storage:"})," ",t.storage]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Role:"})," ",t.description]}),e.jsx("ul",{className:"mt-2 space-y-1",children:t.features.map((i,l)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx(R,{className:"h-3 w-3 mr-1 text-green-400"}),e.jsx("span",{children:i})]},l))})]})]},s))}),e.jsx("button",{onClick:I,disabled:o,className:"px-4 py-2 rounded text-white font-medium flex items-center text-sm",style:{backgroundColor:n.colors.primary,opacity:o?.7:1},children:o?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"mr-2 h-4 w-4 animate-spin"}),"Setting up your library..."]}):e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),"Join the Bitcoin Network"]})})]}),u.length>0&&e.jsxs("div",{className:"mb-6 p-4 rounded-lg bg-black/30",children:[e.jsxs("h5",{className:"font-semibold mb-3 flex items-center",children:[e.jsx(W,{className:"h-4 w-4 mr-2 text-blue-400"}),"Bitcoin Library Network Status"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center p-3 bg-black/40 rounded",children:[e.jsx("div",{className:"text-lg font-bold text-blue-400",children:j.totalNodes}),e.jsx("div",{className:"text-gray-400",children:"Active Libraries"})]}),e.jsxs("div",{className:"text-center p-3 bg-black/40 rounded",children:[e.jsxs("div",{className:"text-lg font-bold text-green-400",children:[j.consensusLevel,"%"]}),e.jsx("div",{className:"text-gray-400",children:"Consensus Level"})]}),e.jsxs("div",{className:"text-center p-3 bg-black/40 rounded",children:[e.jsx("div",{className:"text-lg font-bold text-purple-400",children:j.avgBlockHeight}),e.jsx("div",{className:"text-gray-400",children:"Current Block Height"})]})]})]}),e.jsxs("div",{className:`space-y-4 mb-6 p-4 rounded-lg ${r>=2?"bg-black/20":"bg-black/10 opacity-50"}`,children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("span",{className:`w-8 h-8 rounded-full flex items-center justify-center mr-3 text-sm font-bold ${r>=2?"text-white":"text-gray-500"}`,style:{backgroundColor:r>=2?n.colors.primary:"#6b7280"},children:"2"}),e.jsx("h4",{className:"text-lg font-semibold",style:{color:n.colors.secondary},children:"Sync Your Library Collection"})]}),e.jsx("p",{className:"text-gray-300 text-sm mb-4",children:"Your new library needs to catch up with the rest of the network by downloading and verifying all the Bitcoin transaction history. This is like getting a complete encyclopedia set."}),a&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-3 rounded-lg",style:{backgroundColor:"rgba(6, 214, 160, 0.1)"},children:[e.jsxs("h5",{className:"font-semibold mb-2",style:{color:n.colors.primary},children:[v[a.type].icon," ",a.name]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Type:"})," ",v[a.type].name]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"}),e.jsx("span",{className:a.status==="synced"?"text-green-400":"text-yellow-400",children:a.status==="synced"?" ✅ Fully Synced":" 🔄 Syncing..."})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Block Height:"})," ",a.blockHeight]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Connected Peers:"})," ",u.length]}),a.syncProgress!==void 0&&a.status==="syncing"&&e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Sync Progress:"})," ",a.syncProgress,"%"]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2 mt-1",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-500",style:{width:`${a.syncProgress}%`}})})]})]})]})]}),e.jsx("button",{onClick:U,disabled:a.status==="synced"||o,className:"px-4 py-2 rounded text-white font-medium flex items-center text-sm",style:{backgroundColor:a.status==="synced"?"#6b7280":n.colors.primary,opacity:a.status==="synced"||o?.7:1},children:o?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"mr-2 h-4 w-4 animate-spin"}),"Downloading blocks..."]}):a.status==="synced"?e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"mr-2 h-4 w-4"}),"Sync Complete"]}):e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"mr-2 h-4 w-4"}),"Start Blockchain Sync"]})})]}),u.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h5",{className:"font-semibold mb-2 text-gray-300",children:"📚 Network Libraries"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:u.slice(0,6).map((s,t)=>e.jsx("div",{className:"p-2 bg-black/40 rounded text-xs",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{children:[v[s.type].icon," ",s.name]}),e.jsxs("span",{className:"text-green-400",children:["Block ",s.blockHeight]})]})},t))})]})]}),e.jsxs("div",{className:`space-y-4 mb-6 p-4 rounded-lg ${r>=3?"bg-black/20":"bg-black/10 opacity-50"}`,children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("span",{className:`w-8 h-8 rounded-full flex items-center justify-center mr-3 text-sm font-bold ${r>=3?"text-white":"text-gray-500"}`,style:{backgroundColor:r>=3?n.colors.primary:"#6b7280"},children:"3"}),e.jsx("h4",{className:"text-lg font-semibold",style:{color:n.colors.secondary},children:"Validate New Transaction Entry"})]}),e.jsx("p",{className:"text-gray-300 text-sm mb-4",children:"Someone wants to add a new transaction entry to the Bitcoin ledger. Every library (node) in the network must check if this entry follows all the rules before accepting it into their collection."}),e.jsx("button",{onClick:_,disabled:r<3||o,className:"px-4 py-2 rounded text-white font-medium flex items-center text-sm mb-4",style:{backgroundColor:r>=3?n.colors.primary:"#6b7280",opacity:r<3||o?.7:1},children:o?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"mr-2 h-4 w-4 animate-spin"}),"Broadcasting to network..."]}):e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"mr-2 h-4 w-4"}),"Broadcast New Transaction"]})}),g&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-3 rounded-lg",style:{backgroundColor:"rgba(255, 165, 0, 0.1)"},children:[e.jsx("h5",{className:"font-semibold mb-2 text-orange-400",children:"📝 New Transaction Entry"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"From:"})," ",g.from]}),e.jsxs("div",{children:[e.jsx("strong",{children:"To:"})," ",g.to]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Amount:"})," ",g.amount," BTC"]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Fee:"})," ",g.fee," sats"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Valid:"}),e.jsx("span",{className:g.valid?"text-green-400":"text-red-400",children:g.valid?" ✅ Yes":" ❌ No"})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Signature:"})," ",g.signature]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:u.map((s,t)=>e.jsxs("div",{className:`p-2 rounded text-xs ${s.validating?"bg-yellow-900/20 border border-yellow-400":"bg-black/40"}`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{children:[v[s.type].icon," ",s.name]}),e.jsx("span",{children:s.validating?e.jsx("span",{className:"text-yellow-400",children:"🔍 Validating..."}):s.mempool.length>0?e.jsx("span",{className:"text-green-400",children:"✅ Added to mempool"}):e.jsx("span",{className:"text-gray-400",children:"⏳ Waiting"})})]}),s.type==="spv"&&e.jsx("div",{className:"text-gray-400 text-xs mt-1",children:"Light node: Trusts full node validation"})]},t))})]})]}),e.jsxs("div",{className:`space-y-4 mb-6 p-4 rounded-lg ${r>=4?"bg-black/20":"bg-black/10 opacity-50"}`,children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("span",{className:`w-8 h-8 rounded-full flex items-center justify-center mr-3 text-sm font-bold ${r>=4?"text-white":"text-gray-500"}`,style:{backgroundColor:r>=4?n.colors.primary:"#6b7280"},children:"4"}),e.jsx("h4",{className:"text-lg font-semibold",style:{color:n.colors.secondary},children:"Publish New Encyclopedia Volume"})]}),e.jsx("p",{className:"text-gray-300 text-sm mb-4",children:"A mining node (publisher) has compiled pending transactions into a new block (encyclopedia volume). Now all libraries must verify this new volume before adding it to their collections."}),e.jsx("button",{onClick:z,disabled:r<4||o,className:"px-4 py-2 rounded text-white font-medium flex items-center text-sm mb-4",style:{backgroundColor:r>=4?n.colors.primary:"#6b7280",opacity:r<4||o?.7:1},children:o?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"mr-2 h-4 w-4 animate-spin"}),"Mining new block..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"mr-2 h-4 w-4"}),"Mine & Propose Block"]})}),p&&e.jsxs("div",{className:"p-3 rounded-lg",style:{backgroundColor:"rgba(6, 214, 160, 0.1)"},children:[e.jsxs("h5",{className:"font-semibold mb-2",style:{color:n.colors.primary},children:["📚 New Block Volume #",p.number]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Published by:"})," ",p.minedBy]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Transactions:"})," ",p.transactions.length]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Previous Hash:"})," ",p.previousHash]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Merkle Root:"})," ",p.merkleRoot]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Nonce:"})," ",p.nonce]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Status:"})," ",e.jsx("span",{className:"text-yellow-400",children:"📋 Under Review"})]})]})]})]}),b.votes.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h5",{className:"font-semibold text-gray-300",children:"🗳️ Library Consensus Votes"}),b.votes.map((s,t)=>e.jsxs("div",{className:`p-2 rounded text-xs ${s.vote==="accept"?"bg-green-900/20":"bg-red-900/20"}`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:s.nodeName}),e.jsx("span",{className:s.vote==="accept"?"text-green-400":"text-red-400",children:s.vote==="accept"?"✅ ACCEPT":"❌ REJECT"})]}),e.jsx("div",{className:"text-gray-400",children:s.reason})]},t)),b.votes.length>=j.totalNodes&&e.jsxs("div",{className:`p-3 rounded-lg ${b.valid?"bg-green-900/20 border border-green-500":"bg-red-900/20 border border-red-500"}`,children:[e.jsx("div",{className:`font-semibold ${b.valid?"text-green-400":"text-red-400"}`,children:b.valid?"✅ Consensus Reached: Block Accepted!":"❌ Consensus Failed: Block Rejected!"}),e.jsxs("div",{className:"text-sm text-gray-300 mt-1",children:[b.votes.filter(s=>s.vote==="accept").length," out of ",b.votes.length," libraries accepted the new volume."]})]})]})]}),e.jsxs("div",{className:`space-y-4 mb-6 p-4 rounded-lg ${r>=5?"bg-black/20":"bg-black/10 opacity-50"}`,children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("span",{className:`w-8 h-8 rounded-full flex items-center justify-center mr-3 text-sm font-bold ${r>=5?"text-white":"text-gray-500"}`,style:{backgroundColor:r>=5?n.colors.primary:"#6b7280"},children:"5"}),e.jsx("h4",{className:"text-lg font-semibold",style:{color:n.colors.secondary},children:"Resolve Competing Editions (Fork)"})]}),e.jsx("p",{className:"text-gray-300 text-sm mb-4",children:'Sometimes two publishers release competing volumes at the same time! The network must decide which one to accept. Bitcoin uses the "longest valid chain" rule - the chain with the most work (blocks) wins.'}),e.jsx("button",{onClick:O,disabled:r<5||o,className:"px-4 py-2 rounded text-white font-medium flex items-center text-sm mb-4",style:{backgroundColor:r>=5?n.colors.primary:"#6b7280",opacity:r<5||o?.7:1},children:o?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating fork scenario..."]}):e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),"Simulate Fork Resolution"]})}),d&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:`p-3 rounded-lg border-2 ${((A=d.winner)==null?void 0:A.chain)==="A"?"border-green-400 bg-green-900/20":"border-blue-400 bg-blue-900/20"}`,children:[e.jsx("h5",{className:"font-semibold mb-2 text-blue-400",children:"📚 Edition A"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Publisher:"})," ",d.forkA.minedBy]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Block #:"})," ",d.forkA.number]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Transactions:"})," ",d.forkA.transactions]}),e.jsx("div",{children:e.jsx("strong",{children:"Supporters:"})}),e.jsx("ul",{className:"text-xs text-gray-300 ml-4",children:d.forkA.supporters.map((s,t)=>e.jsxs("li",{children:["• ",s]},t))})]})]}),e.jsxs("div",{className:`p-3 rounded-lg border-2 ${((E=d.winner)==null?void 0:E.chain)==="B"?"border-green-400 bg-green-900/20":"border-purple-400 bg-purple-900/20"}`,children:[e.jsx("h5",{className:"font-semibold mb-2 text-purple-400",children:"📚 Edition B"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Publisher:"})," ",d.forkB.minedBy]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Block #:"})," ",d.forkB.number]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Transactions:"})," ",d.forkB.transactions]}),e.jsx("div",{children:e.jsx("strong",{children:"Supporters:"})}),e.jsx("ul",{className:"text-xs text-gray-300 ml-4",children:d.forkB.supporters.map((s,t)=>e.jsxs("li",{children:["• ",s]},t))})]})]})]}),d.winner?e.jsxs("div",{className:"p-3 rounded-lg bg-green-900/20 border border-green-500",children:[e.jsx("h5",{className:"font-semibold text-green-400 mb-2",children:"🏆 Fork Resolved!"}),e.jsxs("div",{className:"text-sm text-green-300",children:["Edition ",d.winner.chain," became the canonical version when its publisher mined the next block first, creating the longest valid chain. All libraries updated their collections to match."]}),e.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"💡 This is how Bitcoin automatically resolves conflicts without central authority!"})]}):e.jsxs("div",{className:"p-3 rounded-lg bg-yellow-900/20 border border-yellow-500",children:[e.jsx("h5",{className:"font-semibold text-yellow-400 mb-2",children:"⚔️ Fork in Progress"}),e.jsx("div",{className:"text-sm text-yellow-300",children:"Two competing editions exist! Libraries are waiting to see which publisher mines the next block first..."})]})]})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:J,className:"px-6 py-2 rounded text-white font-medium",style:{backgroundColor:n.colors.secondary},children:"🔄 Run Different Node Type"})}),y.message&&e.jsx("div",{className:`mt-6 p-3 rounded-md ${y.success?"bg-green-900/30":"bg-red-900/30"}`,style:{borderLeft:`4px solid ${y.success?"#10b981":"#ef4444"}`},children:e.jsx("p",{className:y.success?"text-green-400":"text-red-400",children:y.message})})]}),y.completed&&e.jsxs("div",{className:"text-center p-4 rounded-lg border",style:{backgroundColor:"rgba(6, 214, 160, 0.1)",borderColor:`${n.colors.primary}40`},children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",style:{color:n.colors.primary},children:"Challenge Complete!"}),e.jsx("p",{className:"text-gray-300",children:"You've mastered Bitcoin nodes! You understand how these digital libraries work together to maintain Bitcoin's decentralized ledger, validate transactions, reach consensus, and resolve conflicts. Nodes are the true guardians of Bitcoin's security and decentralization!"})]})]})}export{ae as default};
