import{j as e}from"./index-Cb9N_GOt.js";import{r as l}from"./react-Q3K9tvtn.js";import{m as O}from"./proxy-ByU3ZF-j.js";const $=[{id:1,name:"Your Node",type:"user",balance:1e6,color:"#9333ea"},{id:2,name:"Merchant A",type:"merchant",balance:5e6,color:"#059669"},{id:3,name:"Routing Node 1",type:"router",balance:1e7,color:"#2563eb"},{id:4,name:"Routing Node 2",type:"router",balance:8e6,color:"#2563eb"},{id:5,name:"Merchant B",type:"merchant",balance:3e6,color:"#059669"},{id:6,name:"Exchange",type:"exchange",balance:5e7,color:"#d97706"}],W=[{source:1,target:3,capacity:1e6,fee:1},{source:3,target:2,capacity:3e6,fee:2},{source:3,target:4,capacity:5e6,fee:1},{source:4,target:5,capacity:2e6,fee:3},{source:4,target:6,capacity:1e7,fee:2},{source:3,target:6,capacity:8e6,fee:1}];function V({onComplete:B}){const[h,L]=l.useState($),[v,z]=l.useState(W),[c,x]=l.useState("network"),[k,U]=l.useState(1),[y,R]=l.useState(5e4),[w,A]=l.useState(2),[r,f]=l.useState("idle"),[o,P]=l.useState([]),[d,C]=l.useState(1),[S,E]=l.useState(!1),M=l.useRef(null);l.useEffect(()=>{const s=M.current;if(!s)return;const t=s.getContext("2d");if(!t)return;s.width=s.clientWidth,s.height=s.clientHeight,t.clearRect(0,0,s.width,s.height);const g=s.width/2,m=s.height/2,T=Math.min(g,m)*.7,j=h.map((a,n)=>{const i=n*2*Math.PI/h.length;return{id:a.id,x:g+T*Math.cos(i),y:m+T*Math.sin(i)}});v.forEach(a=>{const n=j.find(N=>N.id===a.source),i=j.find(N=>N.id===a.target);if(!n||!i)return;t.beginPath();const p=o.includes(a.source)&&o.includes(a.target)&&Math.abs(o.indexOf(a.source)-o.indexOf(a.target))===1;p?(t.strokeStyle="#fbbf24",t.lineWidth=3,r==="routing"?(t.setLineDash([5,5]),t.lineDashOffset=-(Date.now()/100%10)):t.setLineDash([])):(t.strokeStyle="#4b5563",t.lineWidth=1,t.setLineDash([])),t.moveTo(n.x,n.y),t.lineTo(i.x,i.y),t.stroke();const b=(n.x+i.x)/2,u=(n.y+i.y)/2;p||(t.fillStyle="#4b5563",t.font="10px sans-serif",t.fillText(`${(a.capacity/1e6).toFixed(2)} BTC`,b,u))}),j.forEach(a=>{const n=h.find(u=>u.id===a.id);if(!n)return;t.beginPath();const i=k===n.id,p=o.includes(n.id);t.fillStyle=p?"#fbbf24":n.color,t.strokeStyle=i?"#ffffff":"transparent",t.lineWidth=i?2:0;let b=15;if(p&&r==="routing"){const u=Date.now()%2e3/2e3*Math.PI*2;b=15+Math.sin(u)*5}t.arc(a.x,a.y,b,0,Math.PI*2),t.fill(),i&&t.stroke(),t.fillStyle="#ffffff",t.font="12px sans-serif",t.textAlign="center",t.textBaseline="middle",t.fillText(n.name,a.x,a.y-25)}),r==="routing"&&requestAnimationFrame(()=>{L([...h])})},[h,v,k,o,r]);const D=()=>{if(r!=="idle")return;const t=((g,m)=>m===2?[1,3,2]:m===5?[1,3,4,5]:m===6?[1,3,6]:[g,m])(1,w);P(t),f("routing"),setTimeout(()=>{f("success"),setTimeout(()=>{f("idle"),P([]),d===1&&(C(2),x("privacy"))},2e3)},3e3)},F=()=>{S||(E(!0),setTimeout(()=>{B()},1e3))},I=()=>{d<3?(C(d+1),d===1?x("privacy"):d===2&&x("comparison")):S||F()};return e.jsx("div",{className:"mt-4 mb-8",children:e.jsxs("div",{className:"bg-black/30 border border-purple-900 rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-purple-400",children:"Lightning Network Explorer"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>x("network"),className:`px-3 py-1.5 text-sm rounded-md transition-colors ${c==="network"?"bg-purple-600 text-white":"bg-purple-900/30 text-gray-300 hover:bg-purple-900/50"}`,children:"Network"}),e.jsx("button",{onClick:()=>x("privacy"),className:`px-3 py-1.5 text-sm rounded-md transition-colors ${c==="privacy"?"bg-purple-600 text-white":"bg-purple-900/30 text-gray-300 hover:bg-purple-900/50"}`,children:"Privacy Features"}),e.jsx("button",{onClick:()=>x("comparison"),className:`px-3 py-1.5 text-sm rounded-md transition-colors ${c==="comparison"?"bg-purple-600 text-white":"bg-purple-900/30 text-gray-300 hover:bg-purple-900/50"}`,children:"Layer Comparison"})]})]}),e.jsxs(O.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"bg-purple-900/20 border border-purple-800/50 rounded-lg p-4 mb-4",children:[d===1&&c==="network"&&e.jsxs("div",{className:"text-gray-300",children:[e.jsx("h4",{className:"text-lg font-medium text-purple-300 mb-2",children:"Making Lightning Payments"}),e.jsx("p",{children:"Explore the Lightning Network - a second layer protocol built on top of Bitcoin that enables instant, low-fee transactions through a network of payment channels. Make a payment to experience how transactions route through the network."})]}),c==="privacy"&&e.jsxs("div",{className:"text-gray-300",children:[e.jsx("h4",{className:"text-lg font-medium text-purple-300 mb-2",children:"Enhanced Privacy"}),e.jsx("p",{children:"Lightning Network transactions provide better privacy than on-chain Bitcoin transactions since only the channel open/close operations are recorded on the blockchain. Individual payments within channels aren't publicly visible."})]}),c==="comparison"&&e.jsxs("div",{className:"text-gray-300",children:[e.jsx("h4",{className:"text-lg font-medium text-purple-300 mb-2",children:"Multi-Layer Privacy"}),e.jsx("p",{children:"Bitcoin's layered approach combines a transparent and verifiable base layer with more private higher layers. This creates a balance between necessary transparency for verification and practical privacy for everyday use."})]})]},`guidance-${d}-${c}`),c==="network"&&e.jsxs("div",{children:[e.jsxs("div",{className:"bg-black/40 border border-purple-900/50 rounded-lg overflow-hidden mb-6",children:[e.jsxs("div",{className:"p-4",children:[e.jsx("canvas",{ref:M,className:"w-full h-64 md:h-80"}),r==="success"&&e.jsxs("div",{className:"bg-green-900/30 border border-green-800/50 rounded-lg p-3 mt-4",children:[e.jsx("p",{className:"text-green-400 font-medium",children:"Payment successful!"}),e.jsxs("p",{className:"text-sm text-gray-300",children:["Your payment of ",(y/1e6).toFixed(6)," BTC was routed through ",o.length-2," intermediary nodes to reach its destination."]})]})]}),e.jsx("div",{className:"border-t border-purple-900/50 p-4 bg-black/20",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Payment Amount (sats)"}),e.jsx("input",{type:"range",min:"10000",max:"1000000",step:"10000",value:y,onChange:s=>R(Number(s.target.value)),disabled:r!=="idle",className:"w-full h-2 bg-purple-900/50 rounded-lg appearance-none cursor-pointer"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[e.jsx("span",{children:"10,000 sats"}),e.jsxs("span",{children:[(y/1e6).toFixed(3)," BTC"]}),e.jsx("span",{children:"1,000,000 sats"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Destination"}),e.jsxs("select",{value:w,onChange:s=>A(Number(s.target.value)),disabled:r!=="idle",className:"w-full px-3 py-2 bg-black/60 border border-purple-900/50 rounded-md text-gray-300 text-sm focus:border-purple-500 focus:outline-none",children:[e.jsx("option",{value:2,children:"Merchant A"}),e.jsx("option",{value:5,children:"Merchant B"}),e.jsx("option",{value:6,children:"Exchange"})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:D,disabled:r!=="idle",className:`w-full px-4 py-2 rounded-md transition-colors ${r==="idle"?"bg-purple-600 hover:bg-purple-700 text-white":"bg-purple-900/30 text-gray-500 cursor-not-allowed"}`,children:r==="idle"?"Make Payment":r==="routing"?"Routing...":r==="success"?"Payment Sent":"Failed"})})]})})]}),e.jsxs("div",{className:"bg-purple-900/20 border border-purple-800/50 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"text-lg font-medium text-purple-300 mb-2",children:"How Lightning Works"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-black/40 p-3 rounded border border-purple-900/30",children:[e.jsx("h5",{className:"text-sm font-medium text-purple-300 mb-2",children:"1. Payment Channels"}),e.jsx("p",{className:"text-xs text-gray-300",children:"Users open payment channels with a Bitcoin transaction. These channels allow unlimited transactions between parties without touching the blockchain."})]}),e.jsxs("div",{className:"bg-black/40 p-3 rounded border border-purple-900/30",children:[e.jsx("h5",{className:"text-sm font-medium text-purple-300 mb-2",children:"2. Routing Payments"}),e.jsx("p",{className:"text-xs text-gray-300",children:"Payments can be routed through multiple channels, allowing you to pay anyone in the network even without a direct channel."})]}),e.jsxs("div",{className:"bg-black/40 p-3 rounded border border-purple-900/30",children:[e.jsx("h5",{className:"text-sm font-medium text-purple-300 mb-2",children:"3. Final Settlement"}),e.jsx("p",{className:"text-xs text-gray-300",children:"Channels can be closed at any time with a final on-chain transaction that reflects the current balance between the parties."})]})]})]})]}),c==="privacy"&&e.jsx("div",{children:e.jsxs("div",{className:"bg-black/40 border border-purple-900/50 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"text-md font-medium text-purple-300 mb-3",children:"Lightning's Privacy Advantages"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-black/30 p-4 rounded border border-purple-900/30",children:[e.jsx("h5",{className:"text-sm font-medium text-purple-300 mb-3",children:"Off-Chain Transactions"}),e.jsx("p",{className:"text-sm text-gray-300 mb-2",children:"Most Lightning transactions happen off the Bitcoin blockchain, making them:"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-sm text-gray-300",children:[e.jsx("li",{children:"Not publicly visible in blockchain explorers"}),e.jsx("li",{children:"Not permanently recorded in Bitcoin's public ledger"}),e.jsx("li",{children:"Not subject to the same chain analysis techniques"})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-3 italic",children:"Only channel opening and closing transactions appear on-chain"})]}),e.jsxs("div",{className:"bg-black/30 p-4 rounded border border-purple-900/30",children:[e.jsx("h5",{className:"text-sm font-medium text-purple-300 mb-3",children:"Onion Routing"}),e.jsx("p",{className:"text-sm text-gray-300 mb-2",children:"Lightning uses onion routing (similar to Tor) so that:"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-sm text-gray-300",children:[e.jsx("li",{children:"Each node only knows its immediate predecessor and successor"}),e.jsx("li",{children:"Intermediate nodes don't know the payment's origin or destination"}),e.jsx("li",{children:'Payment paths are encrypted in multiple layers (hence "onion")'})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-3 italic",children:"This creates a high level of privacy for both sender and receiver"})]}),e.jsxs("div",{className:"bg-black/30 p-4 rounded border border-purple-900/30 md:col-span-2",children:[e.jsx("h5",{className:"text-sm font-medium text-purple-300 mb-3",children:"Privacy Demo: Path Tracing"}),e.jsx("p",{className:"text-sm text-gray-300 mb-4",children:"In this visualization, observe what information is visible to different participants in a Lightning payment:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-black/40 p-3 rounded border border-purple-900/20",children:[e.jsx("h6",{className:"text-xs font-medium text-purple-200 mb-2",children:"Routing Node Perspective"}),e.jsx("p",{className:"text-xs text-gray-400",children:"A routing node only sees:"}),e.jsxs("ul",{className:"list-disc pl-4 mt-1 text-xs text-gray-400",children:[e.jsx("li",{children:"Immediate previous hop"}),e.jsx("li",{children:"Immediate next hop"}),e.jsx("li",{children:"Amount minus fees"})]}),e.jsx("p",{className:"text-xs text-green-400 mt-2",children:"✓ Cannot determine original sender"}),e.jsx("p",{className:"text-xs text-green-400",children:"✓ Cannot determine final recipient"})]}),e.jsxs("div",{className:"bg-black/40 p-3 rounded border border-purple-900/20",children:[e.jsx("h6",{className:"text-xs font-medium text-purple-200 mb-2",children:"Blockchain Observer Perspective"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Someone watching the blockchain sees:"}),e.jsxs("ul",{className:"list-disc pl-4 mt-1 text-xs text-gray-400",children:[e.jsx("li",{children:"Channel open transactions"}),e.jsx("li",{children:"Channel close transactions"}),e.jsx("li",{children:"Channel capacities"})]}),e.jsx("p",{className:"text-xs text-green-400 mt-2",children:"✓ Cannot see individual payments"}),e.jsx("p",{className:"text-xs text-green-400",children:"✓ Cannot determine payment paths"})]}),e.jsxs("div",{className:"bg-black/40 p-3 rounded border border-purple-900/20",children:[e.jsx("h6",{className:"text-xs font-medium text-purple-200 mb-2",children:"Merchant Perspective"}),e.jsx("p",{className:"text-xs text-gray-400",children:"A merchant receiving payment sees:"}),e.jsxs("ul",{className:"list-disc pl-4 mt-1 text-xs text-gray-400",children:[e.jsx("li",{children:"Payment amount received"}),e.jsx("li",{children:"Payment request/invoice details"}),e.jsx("li",{children:"Immediate previous hop"})]}),e.jsx("p",{className:"text-xs text-green-400 mt-2",children:"✓ Cannot determine original sender"}),e.jsx("p",{className:"text-xs text-green-400",children:"✓ Cannot see customer's other transactions"})]})]})]})]})]})}),c==="comparison"&&e.jsx("div",{children:e.jsxs("div",{className:"bg-black/40 border border-purple-900/50 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"text-md font-medium text-purple-300 mb-4",children:"Bitcoin's Layered Privacy Model"}),e.jsx("div",{className:"relative overflow-x-auto mb-6",children:e.jsxs("table",{className:"w-full text-left border-separate border-spacing-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 bg-black/60 text-xs font-medium text-purple-300 uppercase sticky left-0",children:"Feature"}),e.jsx("th",{className:"p-3 bg-black/60 text-xs font-medium text-purple-300 uppercase",children:"Base Layer (Bitcoin)"}),e.jsx("th",{className:"p-3 bg-black/60 text-xs font-medium text-purple-300 uppercase",children:"Layer 2 (Lightning)"}),e.jsx("th",{className:"p-3 bg-black/60 text-xs font-medium text-purple-300 uppercase",children:"CBDC Comparison"})]})}),e.jsxs("tbody",{className:"divide-y divide-purple-900/30",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"p-3 bg-black/40 text-sm text-gray-300 sticky left-0 font-medium",children:"Transaction Visibility"}),e.jsx("td",{className:"p-3 text-sm text-gray-300",children:"Fully public, all details visible"}),e.jsx("td",{className:"p-3 text-sm text-gray-300",children:"Private, off-chain, details hidden"}),e.jsx("td",{className:"p-3 text-sm text-gray-300",children:"Selective privacy, authority has full visibility"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"p-3 bg-black/40 text-sm text-gray-300 sticky left-0 font-medium",children:"Identity Model"}),e.jsx("td",{className:"p-3 text-sm text-gray-300",children:"Pseudonymous addresses"}),e.jsx("td",{className:"p-3 text-sm text-gray-300",children:"Enhanced pseudonymity with routing"}),e.jsx("td",{className:"p-3 text-sm text-gray-300",children:"Full identity tracking by default"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"p-3 bg-black/40 text-sm text-gray-300 sticky left-0 font-medium",children:"Censorship Resistance"}),e.jsx("td",{className:"p-3 text-sm text-gray-300",children:"High (decentralized consensus)"}),e.jsx("td",{className:"p-3 text-sm text-gray-300",children:"Moderate (depends on pathfinding)"}),e.jsx("td",{className:"p-3 text-sm text-gray-300",children:"None (centrally controlled)"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"p-3 bg-black/40 text-sm text-gray-300 sticky left-0 font-medium",children:"Data Collection"}),e.jsx("td",{className:"p-3 text-sm text-gray-300",children:"Public blockchain data"}),e.jsx("td",{className:"p-3 text-sm text-gray-300",children:"Limited to channel partners"}),e.jsx("td",{className:"p-3 text-sm text-gray-300",children:"Comprehensive data collection"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"p-3 bg-black/40 text-sm text-gray-300 sticky left-0 font-medium",children:"Transaction Speed"}),e.jsx("td",{className:"p-3 text-sm text-gray-300",children:"~10 minutes (on average)"}),e.jsx("td",{className:"p-3 text-sm text-gray-300",children:"Near-instant"}),e.jsx("td",{className:"p-3 text-sm text-gray-300",children:"Near-instant"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"p-3 bg-black/40 text-sm text-gray-300 sticky left-0 font-medium",children:"Privacy Control"}),e.jsx("td",{className:"p-3 text-sm text-gray-300",children:"User-managed"}),e.jsx("td",{className:"p-3 text-sm text-gray-300",children:"User-managed, enhanced"}),e.jsx("td",{className:"p-3 text-sm text-gray-300",children:"Authority-controlled"})]})]})]})}),e.jsxs("div",{className:"bg-purple-900/20 border border-purple-800/50 rounded-lg p-4",children:[e.jsx("h5",{className:"text-sm font-medium text-purple-300 mb-2",children:"The Best of Both Worlds"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Bitcoin's multi-layer approach solves the privacy-transparency dilemma by providing:"}),e.jsxs("ul",{className:"list-disc pl-5 mt-2 space-y-1 text-sm text-gray-300",children:[e.jsx("li",{children:"A transparent, verifiable base layer for settlement and consensus"}),e.jsx("li",{children:"Privacy-enhanced higher layers for everyday transactions"}),e.jsx("li",{children:"User choice in which layer to use based on needs"}),e.jsx("li",{children:"Decentralization and trust minimization throughout"})]}),e.jsx("p",{className:"text-sm text-gray-300 mt-3",children:"This creates a financial system that combines the best aspects of transparency (for verification and trust) with privacy (for personal freedom and security)."})]})]})}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-400",children:["Step ",d," of 3"]}),e.jsx("button",{onClick:I,className:"px-5 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:d<3?"Continue":"Complete Challenge"})]})]})})}export{V as default};
